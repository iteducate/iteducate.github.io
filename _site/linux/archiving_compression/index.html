<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Archiving and Compression - Blog Notes</title>
<meta name="description" content="File archiving is used when one or more files need to be transmitted or stored as efficiently as possible.  There are two aspects to this:   Archiving – Combining multiple files into one, which eliminates the overhead in individual files and makes it easier to transmit  Compressing – Making the files smaller by removing redundant information">


  <meta name="author" content="Ivan Denisenko">
  
  <meta property="article:author" content="Ivan Denisenko">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Blog Notes">
<meta property="og:title" content="Archiving and Compression">
<meta property="og:url" content="https://iteducate.github.io/linux/archiving_compression/">


  <meta property="og:description" content="File archiving is used when one or more files need to be transmitted or stored as efficiently as possible.  There are two aspects to this:   Archiving – Combining multiple files into one, which eliminates the overhead in individual files and makes it easier to transmit  Compressing – Making the files smaller by removing redundant information">







  <meta property="article:published_time" content="2017-10-23T12:20:00+03:00">





  

  


<link rel="canonical" href="https://iteducate.github.io/linux/archiving_compression/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Ivan Denisenko",
      "url": "https://iteducate.github.io/"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Blog Notes Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    <script src="/assets/js/mermaid/mermaid.js"></script>
  

    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/default.png" alt=""></a>
        
        <a class="site-title" href="/">
          Blog Notes
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Category</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/bio-photo.jpg" alt="Ivan Denisenko" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Ivan Denisenko</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Crazy man</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Moscow</span>
        </li>
      

      
        
          
            <li><a href="mailto:ghostmorgan13@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://neteducate.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://www.facebook.com/DenIvanTea" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://www.instagram.com/denisenko__ivan/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/ivan-denisenko-357250b8" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">Linkedin</span></a></li>
          
        
          
            <li><a href="https://www.vk.com/denisenko_ivan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-vk" aria-hidden="true"></i><span class="label">VK</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Archiving and Compression">
    <meta itemprop="description" content="File archiving is used when one or more files need to be transmitted or stored as efficiently as possible.  There are two aspects to this:Archiving – Combining multiple files into one, which eliminates the overhead in individual files and makes it easier to transmitCompressing – Making the files smaller by removing redundant information">
    <meta itemprop="datePublished" content="2017-10-23T12:20:00+03:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Archiving and Compression
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2017-10-23T12:20:00+03:00">October 23, 2017</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          14 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Содержание</h4></header>
              <ul class="toc__menu"><li><a href="#11-introduction">1.1 Introduction</a></li><li><a href="#12-compressing-files">1.2 Compressing files</a></li><li><a href="#13-archiving-files">1.3 Archiving Files</a></li><li><a href="#14-zip-files">1.4 ZIP files</a></li></ul>

            </nav>
          </aside>
        
        <p><strong>File archiving</strong> is used when one or more files need to be transmitted or stored as efficiently as possible.  There are two aspects to this:</p>
<ul type="disc" class="">
<li>
<strong>Archiving</strong> – Combining multiple files into one, which eliminates the overhead in individual files and makes it easier to transmit</li>
<li>
<strong>Compressing</strong> – Making the files smaller by removing redundant information</li>
</ul>

<h1 id="11-introduction">1.1 Introduction</h1>

<p>You can archive multiple files into a single archive and then compress it, or you can compress an individual file.  The former is still referred to as archiving, while the latter is just called compression.  When you take an archive, decompress it and extract one or more files, you are <var>un-archiving</var> it.</p>

<p>Even though disk space is relatively cheap, archiving and compression still has value:</p>
<ul type="disc" class="">
<li>If you want to make a large number of files available, such as the source code to an application or a collection of documents, it is easier for people to download a compressed archive than it is to download individual files.</li>
<li>Log files have a habit of filling disks so it is helpful to split them by date and compress older versions.</li>
<li>When you back up directories, it is easier to keep them all in one archive than it is to version each file.</li>
<li>Some streaming devices such as tapes perform better if you’re sending a stream of data rather than individual files.</li>
<li>It can often be faster to compress a file before you send it to a tape drive or over a slower network and decompress it on the other end than it would be to send it uncompressed.</li>
</ul>

<p>As a Linux administrator, you should become familiar with the tools for archiving and compressing files.</p>

<h1 id="12-compressing-files">1.2 Compressing files</h1>
<p><var>Compressing</var> files makes them smaller by removing duplication from a file and storing it such that the file can be restored.  A file with human readable text might have frequently used words replaced by something smaller, or an image with a solid background might represent patches of that color by a code.  You generally don’t use the compressed version of the file, instead you decompress it before use.  The <var>compression algorithm</var> is a procedure the computer does to encode the original file, and as a result make it smaller.  Computer scientists research these algorithms and come up with better ones that can work faster or make the input file smaller.</p>

<p>When talking about compression, there are two types:</p>
<ul type="disc" class="">
<li>
<strong>Lossless</strong>:  No information is removed from the file.  Compressing a file and decompressing it leaves something identical to the original.</li>
<li>
<strong>Lossy</strong>:  Information might be removed from the file as it is compressed so that uncompressing a file will result in a file that is slightly different than the original.  For instance, an image with two subtly different shades of green might be made smaller by treating those two shades as the same.  Often, the eye can’t pick out the difference anyway.</li>
</ul>

<p>Generally human eyes and ears don’t notice slight imperfections in pictures and audio, especially as they are displayed on a monitor or played over speakers.  Lossy compression often benefits media because it results in smaller file sizes and people can’t tell the difference between the original and the version with the changed data.  For things that must remain intact, such as documents, logs, and software, you need lossless compression.</p>

<p>Most image formats, such as GIF, PNG, and JPEG, implement some kind of lossy compression.  You can generally decide how much quality you want to preserve.  A lower quality results in a smaller file, but after decompression you may notice artifacts such as rough edges or discolorations.  High quality will look much like the original image, but the file size will be closer to the original.</p>

<p>Compressing an already compressed file will not make it smaller.  This is often forgotten when it comes to images, since they are already stored in a compressed format.  With lossless compression, this multiple compression is not a problem, but if you compress and decompress a file several times using a lossy algorithm you will eventually have something that is unrecognizable.</p>

<p>Linux provides several tools to compress files, the most common is <code>gzip</code>.  Here we show a log file before and after compression.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> access_log<span class="k">*</span>
<span class="go">-rw-r--r-- 1 sean sean 372063 Oct 11 21:24 access_log
</span><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">gzip </span>access_log
<span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> access_log<span class="k">*</span>
<span class="go">-rw-r--r-- 1 sean sean 26080 Oct 11 21:24 access_log.gz</span></code></pre></figure>

<p>In the example above, there is a file called <code class="console">access_log</code> that is 372,063 bytes.  The file is compressed by invoking the <code>gzip</code> command with the name of the file as the only argument.  After that command completes, the original file is gone and a compressed version with a file extension of <code class="console">.gz</code> is left in its place.  The file size is now 26,080 bytes, giving a compression ratio of about 14:1, which is common with log files.</p>

<p>Gzip will give you this information if you ask, by using the <code>–l</code> parameter, as shown here:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">gzip</span> <span class="nt">-l</span> access_log.gz
<span class="go">      compressed     uncompressed  ratio uncompressed_name
           26080           372063  93.0% access_log</span></code></pre></figure>

<p>Here, you can see that the compression ratio is given as 93%, which is the inverse of the 14:1 ratio, i.e. 13/14.  Additionally, when the file is decompressed it will be called <code class="console">access_log</code>. </p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">gunzip </span>access_log.gz
<span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> access_log<span class="k">*</span>
<span class="go">-rw-r--r-- 1 sean sean 372063 Oct 11 21:24 access_log</span></code></pre></figure>

<p>The opposite of the <code>gzip</code> command is <code>gunzip</code>.  Alternatively, <code>gzip –d</code> does the same thing (<code>gunzip</code> is just a script that calls <code>gzip</code> with the right parameters). After <code>gunzip</code> does its work you can see that the <code class="console">access_log</code> file is back to its original size.</p>

<p>Gzip can also act as a filter which means it doesn’t read or write anything to disk but instead receives data through an input channel and writes it out to an output channel.  You’ll learn more about how this works in the next chapter, so the next example just gives you an idea of what you can do by being able to compress a stream.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span>mysqldump <span class="nt">-A</span> | <span class="nb">gzip</span> &amp;gt<span class="p">;</span> database_backup.gz
<span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">gzip</span> <span class="nt">-l</span> database_backup.gz
<span class="go">         compressed        uncompressed  ratio uncompressed_name
              76866             1028003  92.5% database_backup</span></code></pre></figure>

<p>The <code>mysqldump –A</code> command outputs the contents of the local MySQL databases to the console. The <code class="console">|</code> character (pipe) says “redirect the output of the previous command into the input of the next one”. The program to receive the output is <code>gzip</code>, which recognizes that no filenames were given so it should operate in pipe mode. Finally, the <code>&gt; database_backup.gz</code> means “redirect the output of the previous command into a file called <code class="console">database_backup.gz</code>. Inspecting this file with <code>gzip –l</code> shows that the compressed version is 7.5% of the size of the original, with the added benefit that the larger file never had to be written to disk.</p>

<p>There is another pair of commands that operate virtually identically to <code>gzip</code> and <code>gunzip</code>. These are <code>bzip2</code> and <code>bunzip2</code>. The <code>bzip</code> utilities use a different compression algorithm (called Burrows-Wheeler block sorting, versus Lempel-Ziv coding used by <code>gzip</code>) that can compress files smaller than <code>gzip</code> at the expense of more CPU time. You can recognize these files because they have a <code class="console">.bz</code> or <code class="console">bz2</code> extension instead of <code class="console">.gz</code>.</p>

<h1 id="13-archiving-files">1.3 Archiving Files</h1>
<p>If you had several files to send to someone, you could compress each one individually.  You would have a smaller amount of data in total than if you sent uncompressed files, but you would still have to deal with many files at one time.</p>

<p><var>Archiving</var> is the solution to this problem.  The traditional UNIX utility to archive files is called <code>tar</code>, which is a short form of TApe aRchive.  <var>Tar</var> was used to stream many files to a tape for backups or file transfer.  Tar takes in several files and creates a single output file that can be split up again into the original files on the other end of the transmission.</p>

<p>Tar has 3 modes you will want to be familiar with:</p>
<ul type="disc" class="">
<li>
<strong>Create</strong>:  make a new archive out of a series of files</li>
<li>
<strong>Extract</strong>:  pull one or more files out of an archive</li>
<li>
<strong>List</strong>:  show the contents of the archive without extracting</li>
</ul>

<p>Remembering the modes is key to figuring out the command line options necessary to do what you want.  In addition to the mode, you will also want to make sure you remember where to specify the name of the archive, as you may be entering multiple file names on a command line.</p>

<p>Here, we show a <var>tar file</var>, also called a tarball, being created from multiple access logs.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-cf</span> access_logs.tar access_log<span class="k">*</span>
<span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> access_logs.tar
<span class="go">-rw-rw-r-- 1 sean sean 542720 Oct 12 21:42 access_logs.tar</span></code></pre></figure>

<p>Creating an archive requires two named options.  The first, <code>c</code>, specifies the mode. The second, <code>f</code>, tells tar to expect a file name as the next argument. The first argument in the example above creates an archive called <code class="console">access_logs.tar</code>.  The remaining arguments are all taken to be input file names, either as a wildcard, a list of files, or both.  In this example, we use the wildcard option to include all files that begin with <code class="console">access_log</code>.</p>

<p>The example above does a long directory listing of the created file.  The final size is 542,720 bytes which is slightly larger than the input files. Tarballs can be compressed for easier transport, either by gzipping the archive or by having <code>tar</code> do it with the <code>z</code> flag as follows:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-czf</span> access_logs.tar.gz  access_log<span class="k">*</span>
<span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> access_logs.tar.gz
<span class="go">-rw-rw-r-- 1 sean sean 46229 Oct 12 21:50 access_logs.tar.gz
</span><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">gzip</span> <span class="nt">-l</span> access_logs.tar.gz
<span class="go">         compressed        uncompressed  ratio uncompressed_name
              46229              542720  91.5% access_logs.tar</span></code></pre></figure>

<p>The example above shows the same command as the prior example, but with the addition of the <code>z</code> parameter.  The output is much smaller than the tarball itself, and the resulting file is compatible with <code>gzip</code>. You can see from the last command that the uncompressed file is the same size as it would be if you tarred it in a separate step.</p>

<p>While UNIX doesn’t treat file extensions specially, the convention is to use <code class="console">.tar</code> for <code>tar</code> files, and <code class="console">.tar.gz</code> or <code class="console">.tgz</code> for compressed <code>tar</code> files. You can use <code>bzip2</code> instead of <code>gzip</code> by substituting the letter <code>z</code> for <code>j</code> and using <code class="console">.tar.bz2</code>, <code class="console">.tbz</code>, or <code class="console">.tbz2</code> for a file extension (e.g. <code>tar –cjf file.tbz access_log*</code>).</p>

<p>Given a <code>tar</code> file, compressed or not, you can see what’s in it by using the <code>t</code> command:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-tjf</span> access_logs.tbz
<span class="go">logs/
logs/access_log.3
logs/access_log.1
logs/access_log.4
logs/access_log
logs/access_log.2</span></code></pre></figure>

<p>This example uses 3 options:</p>
<ul type="disc" class="">
<li>
<code>t</code>: list files in the archive</li>
<li>
<code>j</code>:  decompress with <code>bzip2</code> before reading</li>
<li>
<code>f</code>:  operate on the given filename <code class="console">access_logs.tbz</code>
</li>
</ul>

<p>The contents of the compressed archive are then displayed.  You can see that a directory was prefixed to the files.  Tar will recurse into subdirectories automatically when compressing and will store the path info inside the archive.</p>

<p>Just to show that this file is still nothing special, we will list the contents of the file in two steps using a pipeline.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span>bunzip2 <span class="nt">-c</span> access_logs.tbz | <span class="nb">tar</span> <span class="nt">-t</span>
<span class="go">logs/
logs/access_log.3
logs/access_log.1
logs/access_log.4
logs/access_log
logs/access_log.2</span></code></pre></figure>

<p>The left side of the pipeline is <code>bunzip –c access_logs.tbz</code>, which decompresses the file, but the <code>-c</code> option sends the output to the screen. The output is redirected to <code>tar –t</code>. If you don’t specify a file with <code>–f</code> then <code>tar</code> will read from the standard input, which in this case is the uncompressed file.</p>

<p>Finally you can extract the archive with the <code>–x</code> flag:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-xjf</span> access_logs.tbz
<span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span>
<span class="go">total 36
-rw-rw-r-- 1 sean sean 30043 Oct 14 13:27 access_logs.tbz
drwxrwxr-x 2 sean sean  4096 Oct 14 13:26 logs
</span><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> logs
<span class="go">total 536
-rw-r--r-- 1 sean sean 372063 Oct 11 21:24 access_log
-rw-r--r-- 1 sean sean    362 Oct 12 21:41 access_log.1
-rw-r--r-- 1 sean sean 153813 Oct 12 21:41 access_log.2
-rw-r--r-- 1 sean sean   1136 Oct 12 21:41 access_log.3
-rw-r--r-- 1 sean sean    784 Oct 12 21:41 access_log.4</span></code></pre></figure>

<p>The example above uses the similar pattern as before, specifying the operation (eXtract), the compression (the <code>j</code> flag, meaning <code>bzip2</code>), and a file name (<code>-f</code> <code class="console">access_logs.tbz</code>).  The original file is untouched and the new <strong>logs</strong> directory is created. Inside the directory are the files.</p>

<p>Add the <code>–v</code> flag and you will get verbose output of the files processed. This is helpful so you can see what’s happening:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-xjvf</span> access_logs.tbz
<span class="go">  logs/
  logs/access_log.3
  logs/access_log.1
  logs/access_log.4
  logs/access_log
  logs/access_log.2</span></code></pre></figure>

<p>It is important to keep the <code>–f</code> flag at the end, as <code>tar</code> assumes whatever follows it is a filename.  In the next example, the <code>f</code> and <code>v</code> flags were transposed, leading to <code>tar</code> interpreting the command as an operation on a file called "<code class="console">v</code>" (the relevant message is in italics.)</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-xjfv</span> access_logs.tbz
<span class="go">tar (child): v: Cannot open: No such file or directory
tar (child): Error is not recoverable: exiting now
tar: Child returned status 2
tar: Error is not recoverable: exiting now</span></code></pre></figure>

<p>If you only want some files out of the archive you can add their names to the end of the command, but by default they must match the name in the archive exactly or use a pattern:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-xjvf</span> access_logs.tbz logs/access_log
<span class="go">logs/access_log</span></code></pre></figure>

<p>The example above shows the same archive as before, but extracting only the <code class="console">logs/access_log</code> file. The output of the command (as verbose mode was requested with the <code>v</code> flag) shows only the one file has been extracted.</p>

<p>Tar has many more features, such as the ability to use patterns when extracting files, excluding certain files, or outputting the extracted files to the screen instead of disk. The documentation for <code>tar</code> has in depth information.</p>

<h1 id="14-zip-files">1.4 ZIP files</h1>
<p>The de facto archiving utility in the Microsoft world is the ZIP file.  It is not as prevalent in Linux but is well supported by the <code>zip</code> and <code>unzip</code> commands.  With <code>tar</code> and <code>gzip</code>/<code>gunzip</code> the same commands and options can be used to do the creation and extraction, but this is not the case with <code>zip</code>.  The same option has different meanings for the two different commands.</p>

<p>The default mode of <code>zip</code> is to add files to an archive and compress it.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span>zip logs.zip logs/<span class="k">*</span>
<span class="go">  adding: logs/access_log (deflated 93%)
  adding: logs/access_log.1 (deflated 62%)
  adding: logs/access_log.2 (deflated 88%)
  adding: logs/access_log.3 (deflated 73%)
  adding: logs/access_log.4 (deflated 72%)</span></code></pre></figure>

<p>The first argument in the example above is the name of the archive to be operated on, in this case it is <code class="console">logs.zip</code>.  After that, is a list of files to be added. The output shows the files and the compression ratio. It should be noted that <code>tar</code> requires the <code>–f</code> option to indicate a filename is being passed, while <code>zip</code> and <code>unzip</code> require a filename and therefore don’t need you to explicitly say a filename is being passed.</p>

<p>Zip will not recurse into subdirectories by default, which is different behavior than <code>tar</code>. That is, merely adding <code class="console">logs</code> instead of <code class="console">logs/*</code> will only add the empty directory and not the files under it. If you want <code>tar</code> like behavior, you must use the <code>–r</code> command to indicate recursion is to be used:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span>zip <span class="nt">-r</span> logs.zip logs
<span class="go">  adding: logs/ (stored 0%)
  adding: logs/access_log.3 (deflated 73%)
  adding: logs/access_log.1 (deflated 62%)
  adding: logs/access_log.4 (deflated 72%)
  adding: logs/access_log (deflated 93%)
  adding: logs/access_log.2 (deflated 88%)</span></code></pre></figure>

<p>In the example above, all files under the logs directory are added because it uses the <code>–r</code> option.  The first line of output indicates that a directory was added to the archive, but otherwise the output is similar to the previous example.</p>

<p>Listing files in the <code>zip</code> is done by the <code>unzip</code> command and the <code>–l</code> option (list):</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span>unzip <span class="nt">-l</span> logs.zip
<span class="go">Archive:  logs.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
        0  10-14-2013 14:07   logs/
     1136  10-14-2013 14:07   logs/access_log.3
      362  10-14-2013 14:07   logs/access_log.1
      784  10-14-2013 14:07   logs/access_log.4
    90703  10-14-2013 14:07   logs/access_log
   153813  10-14-2013 14:07   logs/access_log.2
---------                     -------
   246798                     6 files</span></code></pre></figure>

<p>Extracting the files is just like creating the archive, as the default operation is to extract:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span>unzip logs.zip
<span class="go">Archive:  logs.zip
   creating: logs/
  inflating: logs/access_log.3
  inflating: logs/access_log.1
  inflating: logs/access_log.4
  inflating: logs/access_log
  inflating: logs/access_log.2</span></code></pre></figure>

<p>Here, we extract all the files in the archive to the current directory.  Just like <code>tar</code>, you can pass filenames on the command line:</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">bob:tmp $</span><span class="w"> </span>unzip logs.zip access_log
<span class="go">Archive:  logs.zip
caution: filename not matched:  access_log
</span><span class="gp">bob:tmp $</span><span class="w"> </span>unzip logs.zip logs/access_log
<span class="go">Archive:  logs.zip
  inflating: logs/access_log
</span><span class="gp">bob:tmp $</span><span class="w"> </span>unzip logs.zip logs/access_log.<span class="k">*</span>
<span class="go">Archive:  logs.zip
  inflating: logs/access_log.3
  inflating: logs/access_log.1
  inflating: logs/access_log.4
  inflating: logs/access_log.2</span></code></pre></figure>

<p>The example above shows three different attempts to extract a file.  First, just the name of the file is passed without the directory component.  Like <code>tar</code>, the file is not matched.</p>

<p>The second attempt passes the directory component along with the filename, which extracts just that file.</p>

<p>The third version uses a wildcard, which extracts the 4 files matching the pattern, just like <code>tar</code>.</p>

<p>The <code>zip</code> and <code>unzip</code> man pages describe the other things you can do with these tools, such as replace files within the archive, use different compression levels, and even use encryption.</p>

<p><em>Все материалы взяты с официального курса <i class="fa fa-link"></i> <a href="https://www.netacad.com/ru/courses/ndg-linux-essentials/">NDG Linux Essential</a></em></p>

        

        <a href="#page-title" class="back-to-top">Back to top &uarr;</a>
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#bunzip" class="page__taxonomy-item" rel="tag">bunzip</a><span class="sep">, </span>
    
      <a href="/tags/#bzip" class="page__taxonomy-item" rel="tag">bzip</a><span class="sep">, </span>
    
      <a href="/tags/#gunzip" class="page__taxonomy-item" rel="tag">gunzip</a><span class="sep">, </span>
    
      <a href="/tags/#gzip" class="page__taxonomy-item" rel="tag">gzip</a><span class="sep">, </span>
    
      <a href="/tags/#tar" class="page__taxonomy-item" rel="tag">tar</a><span class="sep">, </span>
    
      <a href="/tags/#unzip" class="page__taxonomy-item" rel="tag">unzip</a><span class="sep">, </span>
    
      <a href="/tags/#zip" class="page__taxonomy-item" rel="tag">zip</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#linux" class="page__taxonomy-item" rel="tag">linux</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-10-23T12:20:00+03:00">October 23, 2017</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Archiving+and+Compression%20https%3A%2F%2Fiteducate.github.io%2Flinux%2Farchiving_compression%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fiteducate.github.io%2Flinux%2Farchiving_compression%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fiteducate.github.io%2Flinux%2Farchiving_compression%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>

  <a href="https://vk.com/share.php?url=https%3A%2F%2Fiteducate.github.io%2Flinux%2Farchiving_compression%2F" class="btn btn--vk" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on VK"><i class="fab fa-fw fa-vk" aria-hidden="true"></i><span> VK</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/english/phras_take/" class="pagination--pager" title="Основные значения фразового глагола take
">Previous</a>
    
    
      <a href="/%D0%BF%D1%81%D0%B8%D1%85%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F/how_to_get_friends_ch_01/" class="pagination--pager" title="Как приобретать друзей и оказывать влияние на людей. Глава 1.
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/protocols/rfc/" rel="permalink">RFC
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2021-09-25T09:00:00+03:00">September 25, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Список RFC, которые будут встречаться по ходу написания статей:
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/protocols/ip_header/" rel="permalink">Структура протокола IP
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2021-09-25T09:00:00+03:00">September 25, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Формат заголовка протокола IP состоит из определённого набора полей, которые описаны в RFC 791. Разбор данных полей важен для понимания процесса маршрутизаци...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/editors/vim_1/" rel="permalink">Необычный взгляд на редактирование текста. Часть I.
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2019-11-11T09:00:00+03:00">November 11, 2019</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Каждому из нас хоть раз в жизни приходилось иметь дело с обработкой текстовых документов. Дело казалось бы обыденное, открыл “офис” и вперёд, но некоторые до...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/%D0%B8%D0%B1/inform_security_1_2/" rel="permalink">Основные понятия в области безопасности автоматизированных систем
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2019-10-28T11:00:00+03:00">October 28, 2019</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Вторая статья первого цикла информационной безопасности будет посвящена краткому обзору основных понятий, касающихся безопасности АСУ. Постараюсь сделать её ...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Ivan Denisenko. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "https://iteducate.github.io/linux/archiving_compression/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/linux/archiving_compression"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://iteducate-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
