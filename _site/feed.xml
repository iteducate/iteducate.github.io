<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://iteducate.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://iteducate.github.io/" rel="alternate" type="text/html" /><updated>2021-10-07T01:09:50+03:00</updated><id>https://iteducate.github.io/feed.xml</id><title type="html">Blog Notes</title><subtitle>Personal website with .</subtitle><author><name>Ivan Denisenko</name></author><entry><title type="html">Структура протокола ICMP</title><link href="https://iteducate.github.io/networks/icmp_prot/" rel="alternate" type="text/html" title="Структура протокола ICMP" /><published>2021-10-07T00:00:00+03:00</published><updated>2021-10-07T00:00:00+03:00</updated><id>https://iteducate.github.io/networks/icmp_prot</id><content type="html" xml:base="https://iteducate.github.io/networks/icmp_prot/">&lt;p&gt;Internet Control Message Protocol или просто ICMP описан в &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc792.html&quot;&gt;RFC 792&lt;/a&gt;. Данный протокол определяет набор различных сообщений, целью которых является управление сетью.&lt;/p&gt;

&lt;p&gt;ICMP сообщения могут классифицироваться как &lt;em&gt;сообщения об ошибках&lt;/em&gt;, а также как сообщения типа &lt;em&gt;“запрос - ответ”&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;mermaid&quot; align=&quot;center&quot;&gt;
graph TD
 C{ICMP}
    C --&amp;gt; D[Error message]
    C --&amp;gt; E[Query-Response]
&lt;/div&gt;

&lt;p&gt;Ниже представлен основной формат пакета ICMP&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/icmp/structure_icmp.png&quot;&gt;
          &lt;img src=&quot;/assets/images/icmp/structure_icmp.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Структура протокола ICMP&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Пакеты ICMP определяются по их типу (&lt;strong&gt;&lt;em&gt;Type&lt;/em&gt;&lt;/strong&gt;), однако, большинство типов могут иметь более специфичные типы, они определяются по полю &lt;strong&gt;&lt;em&gt;Code&lt;/em&gt;&lt;/strong&gt;. &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc1700.html&quot;&gt;RFC 1700&lt;/a&gt; определяет все основные типы и коды для протокола ICMP.&lt;/p&gt;

&lt;p&gt;Ниже в таблице также перечислены данные поля с их описанием&lt;/p&gt;

&lt;table&gt;
	&lt;thead&gt;
		&lt;tr&gt;
			&lt;th scope=&quot;col&quot;&gt;Тип&lt;/th&gt;
			&lt;th scope=&quot;col&quot;&gt;Код&lt;/th&gt;
			&lt;th scope=&quot;col&quot;&gt;Название&lt;/th&gt;
		&lt;/tr&gt;
	&lt;/thead&gt;
	&lt;tbody&gt;
		&lt;tr&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;Echo Reply&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td colspan=&quot;1&quot; rowspan=&quot;14&quot;&gt;3&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
			&lt;td&gt;Destination Unreachable&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;1&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;2&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;3&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;4&lt;/td&gt;
			&lt;td&gt;Fragmentation Needed and Don&apos;t Fragment Flag Set&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;5&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;6&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;7&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;8&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;9&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;10&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;11&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;12&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;4&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td colspan=&quot;1&quot; rowspan=&quot;5&quot;&gt;5&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;1&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;2&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;3&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;6&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;8&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;9&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;10&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td colspan=&quot;1&quot; rowspan=&quot;3&quot;&gt;11&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;1&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td colspan=&quot;1&quot; rowspan=&quot;4&quot;&gt;12&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;1&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;2&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;13&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;14&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;15&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;16&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;17&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;18&lt;/td&gt;
			&lt;td&gt;0&lt;/td&gt;
			&lt;td&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td&gt;30&lt;/td&gt;
			&lt;td&gt;-&lt;/td&gt;
			&lt;td&gt;Traceroute&lt;/td&gt;
		&lt;/tr&gt;
	&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;P.S.&lt;/strong&gt; &lt;em&gt;вся информация представленная здесь используется исключительно в образовательных целях. Все совпадения с реальными объектами, адресами, именами и т.д. случайна и не несёт цели получить от этого выгоду или причинить кому-либо вред.&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="networks" /><category term="protocols" /><category term="icmp" /><summary type="html">Internet Control Message Protocol или просто ICMP описан в RFC 792. Данный протокол определяет набор различных сообщений, целью которых является управление сетью.</summary></entry><entry><title type="html">Разновидности протокола ARP</title><link href="https://iteducate.github.io/networks/arp_types/" rel="alternate" type="text/html" title="Разновидности протокола ARP" /><published>2021-10-05T09:00:00+03:00</published><updated>2021-10-05T09:00:00+03:00</updated><id>https://iteducate.github.io/networks/arp_types</id><content type="html" xml:base="https://iteducate.github.io/networks/arp_types/">&lt;p&gt;В предыдущей статье был рассмотрен протокол ARP, структура и принцип его работы. Сегодня я хочу показать несколько разновидностей данного протокола, которые также иногда используются в сетях.&lt;/p&gt;

&lt;h2 id=&quot;proxy-arp&quot;&gt;Proxy ARP&lt;/h2&gt;

&lt;p&gt;Иногда его еще называют &lt;em&gt;promiscuous ARP&lt;/em&gt;, данный протокол описан в &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc925.html&quot;&gt;RFC 925&lt;/a&gt; и &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc1027.html&quot;&gt;RFC 1027&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Proxy ARP - это метод с помощью которого маршрутизаторы &lt;em&gt;могут сделать себя доступными для устройств&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Например, устройство с адресом 15.65.32.124/24 хочет отправить пакет на адрес 15.65.100.35/24, но на данном устройстве не настроен шлюз по умолчанию, поэтому устройство не знает как отправить на маршрутизатор пакет. В таком случае устройство генерирует ARP Request для адреса 15.65.100.35. Локальный маршрутизатор, получив данный запрос и зная как достичь сети 15.65.100.0, сгенерирует и отправит ответный пакет ARP Reply, в котором будет содержаться его собственный идентификатор канальной среды.&lt;/p&gt;

&lt;p&gt;Таким образом, маршрутизатор заставит устройство поверить, что интерфейс маршрутизатора и есть интерфейс с адресом 15.65.100.35. Все пакеты, которые будут генерироваться для данного адреса будут отправляться на интерфейс маршрутизатора. Данный пример является скорее исключением, потому что в современном мире всё же принято назначать адрес шлюза на устройство, для того чтобы не делать &lt;em&gt;дополнительных забот&lt;/em&gt; для сети.&lt;/p&gt;

&lt;p&gt;Второй вариант использования Proxy ARP - несовпадение масок на интерфейсах шлюза и устройств. Допустим на маршрутизаторе есть два интерфейса. Каждому из интерфейсов назначены адреса с /28 маской. Пусть будет на первом интерфейсе адрес 160.1.74.1/28, а на другом 160.1.74.28/28. Данные адреса на интерфейсах располагаются в разных подсетях.&lt;/p&gt;

&lt;p&gt;Клиентские устройства же сконфигурированы в той же сети 160.1.74.0, но с маской /24 и не имеют представления о существовании подсетей с /28 маской. Например, первый клиент имеет адрес 160.1.74.10/24, а второй клиент адрес 160.1.74.20/24.&lt;/p&gt;

&lt;p&gt;Для того чтобы первый смог отправить информацию второму ему необходимо создать запрос ARP Request. Маршрутизатор, получив пакет, распознает, что адрес назначения с его точки зрения находится в другой подсети и как и в первом случае отправит ответный пакет ARP Reply, в котором будет содержаться собственный идентификатор канальной среды маршрутизатора.&lt;/p&gt;

&lt;p&gt;Таким образом, Proxy ARP делает прозрачной топологию подсетей для клиентских устройств.&lt;/p&gt;

&lt;h2 id=&quot;gratuitous-arp&quot;&gt;Gratuitous ARP&lt;/h2&gt;

&lt;p&gt;Устройство иногда может создавать запрос ARP со своим собственным IP-адресом в качестве адреса назначения. Такой запрос ARP называется &lt;strong&gt;Gratuitous ARP&lt;/strong&gt; и может использоваться в следующих случаях:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Первый случай&lt;/strong&gt; - использование для проверки дублирования адресов в сети. Устройство, которое отправит ARP Request со своим собственным адресом в качестве адресата назначения в запросе и в ответ получит ARP Reply от другого устройства, сможет узнать, что данный адрес является дубликатом в сети&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Второй случай&lt;/strong&gt; - использование для того чтобы объявить свой новый идентификатор канальной среды. Если устройство получает ARP Request для IPv4 адреса, который уже есть в кэше ARP, то кэш будет обновлен, используя новый идентификатор канального уровня отправителя&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Третий случай&lt;/strong&gt; - использование маршрутизаторами протокола &lt;em&gt;Hot Standby Router Protocol&lt;/em&gt; (HSRP). В случае когда активный маршрутизатор теряет свою роль активного, резеврный маршрутизатор отправляет Gratuitous ARP для того чтобы обновить кэш ARP у устройств в той же подсети&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;По умолчанию Gratuitous ARP выключен на маршрутизаторах cisco. Для того чтобы отключить данное поведение, надо в режиме глобальной конфигурации ввести команду &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip gratuitous-arps&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Подробно посмотреть GARP можно скачав данный &lt;a href=&quot;/assets/pcap/garp.pcapng&quot;&gt;дамп&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;reverse-arp&quot;&gt;Reverse ARP&lt;/h2&gt;

&lt;p&gt;Вместо сопоставления идентификатора канальной среды с заранее известным IP-адресом, Reverse ARP позволяет сопоставить IP-адрес с заранее известным идентификатором канальной среды.&lt;/p&gt;

&lt;p&gt;Некоторые устройства после старта системы могут не знать свой IP-адрес. RARP может быть запрограммирован в программное обеспечение данных устройств, позволяя данному устройству выполнить ARP Request с идентификатором канальной среды самого устройства. Ответный RARP Reply будет содержать соответствующий IP-адрес.&lt;/p&gt;

&lt;p&gt;RARP был значительный образом вытеснен протоколом DHCP (&lt;strong&gt;&lt;em&gt;Dynamic Host Configuration Protocol&lt;/em&gt;&lt;/strong&gt;) - расширением протокола Bootstrap (BootP), каждый из которых предоставляет куда больше информации нежели один IP-адрес.&lt;/p&gt;

&lt;p&gt;Также более подробно посмотреть протокол RARP можно скачав этот &lt;a href=&quot;/assets/pcap/rarp.pcap&quot;&gt;дамп&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;практика&quot;&gt;Практика&lt;/h2&gt;

&lt;p&gt;Рассмотрим на практике второй вариант использования Proxy ARP. Возьмем схему и адресацию, указанную в описании метода использования Proxy ARP.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/type_arp/scheme_proxy_arp.png&quot;&gt;
          &lt;img src=&quot;/assets/images/type_arp/scheme_proxy_arp.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Схема Proxy ARP&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Выполнив все настройки адресации на интерфейсах клиентов и маршрутизатора, запустим ping между клиентами.&lt;/p&gt;

&lt;p&gt;Первоначально в таблице ARP на маршрутизаторе не присутстовали никакие записи, кроме записей собственных интерфейсов:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;show arp
&lt;span class=&quot;go&quot;&gt;Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  160.1.74.1              -   5000.0003.0000  ARPA   GigabitEthernet0/0
Internet  160.1.74.28             -   5000.0003.0001  ARPA   GigabitEthernet0/1
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;После запуска ping на клиенте можно увидеть, что маршрутизатор отвечает на запрос клиента свой ответом, предварительно включив на маршрутизаторе &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debug arp&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;go&quot;&gt;*Oct  5 21:33:42.486: IP ARP: rcvd req src 160.1.74.10 5000.0001.0000, dst 160.1.74.20 GigabitEthernet0/0
*Oct  5 21:33:42.487: IP ARP: creating entry for IP address: 160.1.74.10, hw: 5000.0001.0000
*Oct  5 21:33:42.487: IP ARP: sent rep src 160.1.74.20 5000.0003.0000,
                 dst 160.1.74.10 5000.0001.0000 GigabitEthernet0/0
*Oct  5 21:33:42.489: IP ARP: creating incomplete entry for IP address: 160.1.74.20 interface GigabitEthernet0/1
*Oct  5 21:33:42.490: IP ARP: sent req src 160.1.74.28 5000.0003.0001,
                 dst 160.1.74.20 0000.0000.0000 GigabitEthernet0/1
*Oct  5 21:33:42.491: IP ARP: rcvd rep src 160.1.74.20 0050.0000.0200, dst 160.1.74.28 GigabitEthernet0/1
*Oct  5 21:33:42.493: IP ARP: rcvd req src 160.1.74.20 0050.0000.0200, dst 160.1.74.10 GigabitEthernet0/1
*Oct  5 21:33:42.494: IP ARP: sent rep src 160.1.74.10 5000.0003.0001,
                 dst 160.1.74.20 0050.0000.0200 GigabitEthernet0/1&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Теперь на маршрутизаторе есть полная карта для всех устройств в сети&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;show arp
&lt;span class=&quot;go&quot;&gt;Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  160.1.74.1              -   5000.0003.0000  ARPA   GigabitEthernet0/0
Internet  160.1.74.10             8   5000.0001.0000  ARPA   GigabitEthernet0/0
Internet  160.1.74.20            16   0050.0000.0200  ARPA   GigabitEthernet0/1
Internet  160.1.74.28             -   5000.0003.0001  ARPA   GigabitEthernet0/1
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Однако для того чтобы понять, что в сети настроен Proxy ARP надо обратиться к клиенту и проверить таблицу ARP у него.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/type_arp/arp_linux.png&quot;&gt;
          &lt;img src=&quot;/assets/images/type_arp/arp_linux.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Таблица ARP в Linux&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;В таблице можно заметить, что для двух разных IP-адресов идёт соответствие одинакового идентификатора канальной среды - MAC-адреса интерфейса Gi0/1 маршрутизатора. Это и есть признак того, что в сети работает Proxy ARP.&lt;/p&gt;

&lt;p&gt;По умолчанию Proxy ARP включен на маршрутизаторах cisco. Для того чтобы отключить данное поведение, надо ввести команду &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;no ip proxy-arp&lt;/code&gt; на интерфейсе маршрутизатора.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;P.S.&lt;/strong&gt; &lt;em&gt;вся информация представленная здесь используется исключительно в образовательных целях. Все совпадения с реальными объектами, адресами, именами и т.д. случайна и не несёт цели получить от этого выгоду или причинить кому-либо вред.&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="networks" /><category term="protocols" /><category term="arp" /><summary type="html">В предыдущей статье был рассмотрен протокол ARP, структура и принцип его работы. Сегодня я хочу показать несколько разновидностей данного протокола, которые также иногда используются в сетях.</summary></entry><entry><title type="html">Структура и принцип работы протокола ARP</title><link href="https://iteducate.github.io/networks/arp_prot/" rel="alternate" type="text/html" title="Структура и принцип работы протокола ARP" /><published>2021-10-02T09:00:00+03:00</published><updated>2021-10-02T09:00:00+03:00</updated><id>https://iteducate.github.io/networks/arp_prot</id><content type="html" xml:base="https://iteducate.github.io/networks/arp_prot/">&lt;p&gt;Маршрутизаторы передают пакеты по какому-либо логическому пути, который состоит из определённого количества каналов передачи данных, &lt;em&gt;“читая” и “взаимодействуя”&lt;/em&gt; с сетевыми адресами. Пакеты, инкапсулированные в кадры (фреймы), передаются через канальную среду. Фреймы содержат уникальные идентификаторы канальной среды (&lt;em&gt;например, MAC-адреса&lt;/em&gt;) для определения адресата источника и назначения в канальной среде.&lt;/p&gt;

&lt;p&gt;Устройствам в канальной среде необходим способ определения идентификаторов канальной среды соседей для того чтобы фреймы могли быть отправлены корректному адресату назначения. Одним из таких механизмов определения для протокола &lt;a href=&quot;/networks/ip_prot/&quot;&gt;IP версии 4&lt;/a&gt; является протокол ARP - Address Resolution Protocol, описанный в &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc826.html&quot;&gt;RFC 826&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;1-основы-работы-протокола-arp&quot;&gt;1. Основы работы протокола ARP&lt;/h2&gt;

&lt;p&gt;На рисунке 1 изображён процесс работы протокола ARP&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/process.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/process.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Процесс работы протокола ARP&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Устройство, которому необходимо узнать идентификатор канальной среды другого устройства, создает пакет &lt;strong&gt;ARP Request&lt;/strong&gt;. Данный запрос содержит в себе IP-адрес устройства для которого необходимо узнать идентификатор канального среды (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Target&lt;/code&gt;), а также данные канальной среды (&lt;em&gt;в данном случае MAC-адрес&lt;/em&gt;) и IP-адрес устройства, которое данный запрос сформировало (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Source&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Пакет ARP Request инкапсулируется в фрейм. В качестве MAC-адреса источника выступает сам источник, в качестве MAC-адреса назначения используется broadcast адрес (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FFFF.FFFF.FFFF&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Вот как выглядит ARP Request если захватить его с помощью wireshark&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/arp_request.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/arp_request.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;ARP Request&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Подробно рассмотреть каждое поле запроса ARP можно скачав данный &lt;a href=&quot;/assets/pcap/arp_request.pcapng&quot;&gt;дамп&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Broadcast адрес используется для того чтобы все узлы в канальной среде получили данный фрейм и обработали инкапсулированный внутри пакет. Все устройства, за исключением адресата назначения, поймут, что данный пакет не предназначается для них и попросту отбросят его. Устройство назначения обработает пакет и в ответ отправит &lt;strong&gt;ARP Reply&lt;/strong&gt; адресату источника. Внутри ARP Reply будет содержаться как раз-таки MAC-адрес адресата назначения.&lt;/p&gt;

&lt;p&gt;На следующем изображении можно увидеть как выглядит ARP Reply&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/arp_reply.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/arp_reply.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;ARP Reply&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Также скачав &lt;a href=&quot;/assets/pcap/arp_reply.pcapng&quot;&gt;дамп с трафиком&lt;/a&gt; можно более подробно увидеть каждое поле пакета&lt;/p&gt;

&lt;h2 id=&quot;2-структура-полей-протокола-arp&quot;&gt;2. Структура полей протокола ARP&lt;/h2&gt;

&lt;p&gt;Протокол ARP имеет следующие поля:&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/structure_arp.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/structure_arp.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Формат протокола ARP&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Стоит напомнить, что формат протокола обычно показывается в разрезе 4 байт. Из-за этого часть информации из полей протокола может быть показана как часть следующих 4 байт (&lt;em&gt;на примере Hardware и IP адресацции&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Hardware Type&lt;/strong&gt; - 16-битное поле, определяющее &lt;em&gt;“тип канальной среды”&lt;/em&gt;. Наиболее часто используемые типы представлены в таблице ниже&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Номер&lt;/th&gt;
      &lt;th&gt;Тип среды&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Ethernet&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;15&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Frame Relay&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;17&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;HDLC&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;18&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Fiber Channel&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;20&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Serial Link&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Но основную часть всё же занимает именно Ethernet.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/hard_type.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/hard_type.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Hardware Type&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Protocol Type&lt;/strong&gt; - 16-битное поле, определяющее протокол сетевого уровня, который отправитель связывает с идентификатором канала передачи данных. Для протокола IP версии 4 значение данного поля равно &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x0800&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/prot_type.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/prot_type.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Protocol Type&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Hardware Address Length&lt;/strong&gt; - 8-битное поле, определяющее длину идентификатора канальной среды в байтах. MAC-адреса имеет длину 48 бит или 6 байт.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/hard_length.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/hard_length.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Hardware Address Length&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Protocol Address Length&lt;/strong&gt; - 8-битное поле, определяющее длину адреса сетевого уровня в байтах. IP-адреса имеет длину 32 бита или 4 байта.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/prot_length.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/prot_length.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Protocol Address Length&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Operation&lt;/strong&gt; - 16-битное поле, которое определяет какой тип пакета ARP используется:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;ARP Request&lt;/em&gt; - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;em&gt;ARP Reply&lt;/em&gt; - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;em&gt;Reverse ARP Request&lt;/em&gt; - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;em&gt;Reverse ARP Reply&lt;/em&gt; - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;em&gt;Inverse ARP Request&lt;/em&gt; - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;8&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;&lt;em&gt;Inverse ARP Reply&lt;/em&gt; - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;9&lt;/code&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/opcode.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/opcode.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Opcode&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Последние 20 байт приходятся на адресацию канальной среды и сетевого уровня источника и назначения запроса (MAC-адрес &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;6 байт * 2&lt;/code&gt; + IP-адрес &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4 байт * 2&lt;/code&gt; = 20)&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/mac_ip.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/mac_ip.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;MAC + IP адреса&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;h2 id=&quot;3-практика&quot;&gt;3. Практика&lt;/h2&gt;

&lt;p&gt;Посмотрим небольшую практику на примере следующей схемы:&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/scheme_arp.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/scheme_arp.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Схема №1&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Для того чтобы отследить пакеты arp на устройствах cisco можно воспользоваться утилитой &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debug&lt;/code&gt;. Для этого необходимо в привилегированном режиме выполнить команду &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debug arp&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;debug arp
&lt;span class=&quot;go&quot;&gt;ARP packet debugging is on
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;*Oct  4 18:48:11.317: IP ARP: rcvd req src 185.14.32.135 0050.0000.0200, dst 185.14.32.1 GigabitEthernet0/0
*Oct  4 18:48:11.317: IP ARP: creating entry for IP address: 185.14.32.135, hw: 0050.0000.0200
*Oct  4 18:48:11.317: IP ARP: sent rep src 185.14.32.1 5000.0003.0000,
                 dst 185.14.32.135 0050.0000.0200 GigabitEthernet0/0
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;undebug all
&lt;span class=&quot;go&quot;&gt;All possible debugging has been turned off
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p class=&quot;notice--danger&quot;&gt;&lt;i class=&quot;fa fa-exclamation&quot;&gt;&lt;/i&gt;&lt;strong&gt; Важно:&lt;/strong&gt; команда &lt;code&gt;debug&lt;/code&gt; очень требовательна к ресурсам, следует аккуратно использовать её на производстве. При неаккуратном задании параметров можно потерять доступ к устройству из-за постоянного спама сообщений в консоль.&lt;/p&gt;

&lt;p&gt;Для просмотра таблицы ARP на устройствах cisco можно выполнить команду &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;show arp&lt;/code&gt; в привилегированном режиме. Для операционной системы Windows можно выполнить команду &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arp -a&lt;/code&gt;, а для Linux команда выглядит &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arp -vn&lt;/code&gt;. Примеры выполнения команд приведены ниже:&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/arp_cisco.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/arp_cisco.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Cisco ARP table&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/arp_win.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/arp_win.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Windows ARP table&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/arp/arp_lin.png&quot;&gt;
          &lt;img src=&quot;/assets/images/arp/arp_lin.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Linux ARP table&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Стоит обратить внимание на колонку &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Age&lt;/code&gt; в выводе команды на маршрутизаторе. Данная колонка показывает через какое количество времени данная запись будет удалена из таблицы ARP. Это сделано для того чтобы предотвратить перегрузку таблицы ARP устаревшими записями.&lt;/p&gt;

&lt;p&gt;По умолчанию устройства cisco хранятся информацию у себя в таблице ARP в течение 4 часов, это можно проверить командой &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;show interface &amp;lt;имя_интерфейса&amp;gt; | include ARP&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;show int gi0/0 | inc ARP
&lt;span class=&quot;go&quot;&gt;  Encapsulation ARPA, loopback not set
  ARP type: ARPA, ARP Timeout 04:00:00
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Поведение по умолчанию можно изменить, выполнив следующий набор команд (&lt;em&gt;настройка актуальна для отдельного интерфейса&lt;/em&gt;)&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;conf t
&lt;span class=&quot;go&quot;&gt;Enter configuration commands, one per line.  End with CNTL/Z.
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router(config)#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;interface gi0/0
&lt;span class=&quot;gp&quot;&gt;Router(config-if)#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;arp &lt;span class=&quot;nb&quot;&gt;timeout &lt;/span&gt;1800
&lt;span class=&quot;gp&quot;&gt;Router(config-if)#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;end
&lt;span class=&quot;go&quot;&gt;*Oct  4 20:56:43.122: %SYS-5-CONFIG_I: Configured from console by console
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;show int gi0/0 | inc ARP
&lt;span class=&quot;go&quot;&gt;  Encapsulation ARPA, loopback not set
  ARP type: ARPA, ARP Timeout 00:30:00
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Для очистки ARP кэша можно выполнить команду&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;clear arp-cache
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;В следующий раз я вкратце рассмотрю другие разновидности протокола ARP: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Proxy ARP&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gratuitous ARP&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Reverse ARP&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;P.S.&lt;/strong&gt; &lt;em&gt;вся информация представленная здесь используется исключительно в образовательных целях. Все совпадения с реальными объектами, адресами, именами и т.д. случайна и не несёт цели получить от этого выгоду или причинить кому-либо вред.&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="networks" /><category term="protocols" /><category term="arp" /><summary type="html">Маршрутизаторы передают пакеты по какому-либо логическому пути, который состоит из определённого количества каналов передачи данных, “читая” и “взаимодействуя” с сетевыми адресами. Пакеты, инкапсулированные в кадры (фреймы), передаются через канальную среду. Фреймы содержат уникальные идентификаторы канальной среды (например, MAC-адреса) для определения адресата источника и назначения в канальной среде.</summary></entry><entry><title type="html">Структура протокола IP</title><link href="https://iteducate.github.io/networks/ip_prot/" rel="alternate" type="text/html" title="Структура протокола IP" /><published>2021-09-25T09:00:00+03:00</published><updated>2021-09-25T09:00:00+03:00</updated><id>https://iteducate.github.io/networks/ip_prot</id><content type="html" xml:base="https://iteducate.github.io/networks/ip_prot/">&lt;p&gt;Формат заголовка протокола IP состоит из определённого набора полей, которые описаны в &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc791.html&quot;&gt;RFC 791&lt;/a&gt;. Разбор данных полей важен для понимания процесса маршрутизации. Ниже я опишу данные поля и постараюсь показать их в реальности, используя Wireshark.&lt;/p&gt;

&lt;figure&gt;
  &lt;img src=&quot;/assets/images/ip/structure_ip.png&quot; alt=&quot;IP Header&quot; style=&quot;width:100%&quot; /&gt;
  &lt;figcaption align=&quot;center&quot;&gt;&lt;b&gt;Структура протокола IP&lt;/b&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Version&lt;/strong&gt; - 4-битное поле, определяющее версию используемого протокола. В настоящее время используется две версии протокола - 4 (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0100&lt;/code&gt;) версия и 6 (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0110&lt;/code&gt;) версия.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/version.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/version.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Version&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Header Length&lt;/strong&gt; - 4-битное поле, которое показывает какова длина IP-заголовка &lt;em&gt;в 32-битных словах&lt;/em&gt;.&lt;/p&gt;

&lt;p class=&quot;notice--info&quot;&gt;&lt;i class=&quot;fa fa-info-circle&quot;&gt;&lt;/i&gt;&lt;strong&gt; Заметка:&lt;/strong&gt; Минимальный размер IP-заголовка - 20 байт (&lt;i&gt;сумма всех полей заголовка при пустом поле Options&lt;/i&gt;). Так как максимально в поле из 4 бит можно записать значение 15 (&lt;code&gt;1111&lt;/code&gt;), то максимальный размер IP-заголовка составляет &lt;code&gt;15 * 4 байта = 60 байт&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/header_length.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/header_length.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Header Length&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Type of Service&lt;/strong&gt; - 8-битное поле, может быть использовано для определения обработки пакета. В настоящее время данное поле переопределено как часть фреймворка &lt;em&gt;Differentiated Services&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Данный фреймворк позволяет более гибко обрабатывать IP-пакеты. Фреймворк DiffServe определяет классы обслуживания (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;service classes&lt;/code&gt;) на маршрутизаторах, а затем позволяет производить сортировку согласно данным классам. Маршрутизатор может ставить в очередь и производить пересылку пакетов с различными уровнями приоритета в зависимости от их классификации. Каждая процедура постановки в очередь и пересылки называется PHB - &lt;a href=&quot;https://en.wikipedia.org/wiki/Per-hop_behaviour&quot;&gt;&lt;strong&gt;Per-Hop Behaviour&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;В современном мире 6 бит поля Type of Service определено как поле DSCP - &lt;em&gt;DiffServe Code Point&lt;/em&gt;. Используя эти 6 бит, произвольно либо в соответствии с предопределенными в архитектуре DiffServe классами обслуживания, администратор может определить до 64 классов обслуживания, которые затем могут быть отсортированы в PHB.&lt;/p&gt;

&lt;p&gt;Оставшиеся 2 бита используется для поля ECN - &lt;strong&gt;Explicit Congestion Notification&lt;/strong&gt; - явное уведомление о перегрузках (&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc3168.html&quot;&gt;RFC 3168&lt;/a&gt;). Если маршрутизатор поддерживает данный параметр, то поле примет значение &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;11&lt;/code&gt; в случае сигнализации о перегрузке.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/diffserve_ecn.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/diffserve_ecn.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;DiffServe and ECN&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Total Length&lt;/strong&gt; - 16-битное поле, определяет общую длину пакета, включая заголовок, в байтах. Вычитая длину заголовка можно получить размер данных. 16 бит может содержать максимальное значение в 65535, учитывая это получаем максимально возможное значение IP пакета - 65535 байт.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/total_length.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/total_length.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Total Length&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;16-битное поле &lt;strong&gt;Identifier&lt;/strong&gt; совместно с полями &lt;strong&gt;Flags&lt;/strong&gt; и &lt;strong&gt;Fragment Offset&lt;/strong&gt; используются для того чтобы показать был ли фрагментирован пакет или нет.&lt;/p&gt;

&lt;p&gt;Пакет будет фрагментирован на более мелкие пакеты в случае когда его размер превышает &lt;em&gt;Maximimum Transmition Unit (MTU)&lt;/em&gt; канальной среды через которую данный пакет будет передаваться.&lt;/p&gt;

&lt;p&gt;Например, в случае когда MTU канальной среды равен 1500 байт и по ней передаётся пакет размером 5000 байт, то максимальный размер пакета может содержать только 1500 байт информации. Маршрутизатор должен маркировать каждый фрагмент с тем же значением в поле &lt;em&gt;Identifier&lt;/em&gt; для того чтобы получающая сторона могла определить, что фрагменты относятся к одному и тому же пакету.&lt;/p&gt;

&lt;p class=&quot;notice--info&quot;&gt;&lt;i class=&quot;fa fa-info-circle&quot;&gt;&lt;/i&gt;&lt;strong&gt; Заметка:&lt;/strong&gt; фрагментированный пакет не собирается с каждой стороны канальной среды. Пакет остается фрагментированным до тех пор пока он не достигнет финальной точки назначения.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Flags&lt;/strong&gt; - 3-битное поле, первый бит в котором не используется. Второй бит - бит DF (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Don&apos;t Fragment&lt;/code&gt;). Когда данный бит установлен в &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;, то маршрутизатор не может фрагментировать пакет.&lt;/p&gt;

&lt;p&gt;Если пакет не может быть отправлен без фрагментации, маршрутизатор отбросит пакет и отправит источнику сообщение об ошибке пересылки. Данный функционал позволяет протестировать MTU в сети.&lt;/p&gt;

&lt;p&gt;Рассмотрим простую схему между двумя маршрутизаторами:&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/scheme_ext_ping.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/scheme_ext_ping.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Схема №1&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;С помощью расширенной утилиты &lt;em&gt;ping&lt;/em&gt; на маршрутизаторах Cisco можно найти максимальный MTU между устройствами.&lt;/p&gt;

&lt;p&gt;Ниже представлен пример выполнения данной команды:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;ping
&lt;span class=&quot;go&quot;&gt;Protocol [ip]: 
Target IP address: 192.168.1.1
Repeat count [5]: 1
Datagram size [100]: 
Timeout in seconds [2]: 
Extended commands [n]: y
Ingress ping [n]: 
Source address or interface: 192.168.1.1
Type of service [0]: 
Set DF bit in IP header? [no]: y
Validate reply data? [no]: 
Data pattern [0x0000ABCD]: 
Loose, Strict, Record, Timestamp, Verbose[none]: 
Sweep range of sizes [n]: y
Sweep min size [36]: 1451
Sweep max size [18024]: 1550
Sweep interval [1]: 1
Type escape sequence to abort.
Sending 100, [1451..1550]-byte ICMP Echos to 192.168.1.1, timeout is 2 seconds:
Packet sent with a source address of 192.168.1.1 
Packet sent with the DF bit set
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!....................
&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;..............................
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;Success rate is 50 percent (50/100), round-trip min/avg/max = 1/1/1 ms
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Из вывода видно, что максимальный MTU равен 1500 байт. Существуют и другие способы как с помощью данной команды найти максимальный MTU между целой группой сетевых устройств.&lt;/p&gt;

&lt;p&gt;Например, возьмем следующую схему &lt;a name=&quot;Record Route&quot;&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/big_scheme_ext_ping.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/big_scheme_ext_ping.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Схема №2&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;В данной схеме на всех интерфейсах за исключением одного установлен MTU равный 1500 байт. Для того чтобы найти данный интерфейс мы также можем воспользоваться расширенной утилитой:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;ping
&lt;span class=&quot;go&quot;&gt;Protocol [ip]: 
Target IP address: 163.19.203.170
Repeat count [5]: 1
Datagram size [100]: 
Timeout in seconds [2]: 
Extended commands [n]: y
Ingress ping [n]: 
Source address or interface: 
Type of service [0]: 
Set DF bit in IP header? [no]: y
Validate reply data? [no]: 
Data pattern [0x0000ABCD]: 
Loose, Strict, Record, Timestamp, Verbose[none]: r
Number of hops [ 9 ]: 
Loose, Strict, Record, Timestamp, Verbose[RV]: 
Sweep range of sizes [n]: y
Sweep min size [76]: 500
Sweep max size [18024]: 1500
Sweep interval [1]: 500
Type escape sequence to abort.
Sending 3, [500..1500]-byte ICMP Echos to 163.19.203.170, timeout is 2 seconds:
Packet sent with the DF bit set
Packet has IP options:  Total option bytes= 39, padded length=40
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt; Record route: &amp;lt;*&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)

Reply to request 0 (3 ms) (size 500).  Received packet has options
 Total option bytes= 40, padded length=40
 Record route:
   (192.168.172.50)
   (163.19.203.180)
   (163.19.203.170)
   (163.19.203.170)
   (192.168.172.60)
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;   (192.168.172.50) &amp;lt;*&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
 End of list

Reply to request 1 (3 ms) (size 1000).  Received packet has options
 Total option bytes= 40, padded length=40
 Record route:
   (192.168.172.50)
   (163.19.203.180)
   (163.19.203.170)
   (163.19.203.170)
   (192.168.172.60)
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;   (192.168.172.50) &amp;lt;*&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
 End of list

Unreachable from 192.168.172.60, maximum MTU 1200 (size 1500).  Received packet has options
 Total option bytes= 39, padded length=40
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt; Record route: &amp;lt;*&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)
   (0.0.0.0)

Success rate is 66 percent (2/3), round-trip min/avg/max = 3/3/3 ms
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;Router#&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Из вывода видно, что максимальный MTU в данной схеме равен 1200 байт.&lt;/p&gt;

&lt;p&gt;Третий бит в поле &lt;strong&gt;Flags&lt;/strong&gt; - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;More Fragment&lt;/code&gt;. Когда маршрутизатор фрагментирует пакет, он записывает значение равное &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt; в данный бит, за исключением последнего фрагмента. Этот бит необходим принимающей стороне для того чтобы определить где заканчивается фрагментированный пакет.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Fragment Offset&lt;/strong&gt; - 13-битное поле, определяющее смещение от начала заголовка до начала фрагмента. Так как фрагменты не всегда могут приходить в правильном порядке, то данное поле позволяет принимающей стороне собрать фрагментированный пакет в правильном порядке.&lt;/p&gt;

&lt;p class=&quot;notice--danger&quot;&gt;&lt;i class=&quot;fa fa-exclamation&quot;&gt;&lt;/i&gt;&lt;strong&gt; Важно:&lt;/strong&gt; в случае если в процессе передачи фрагментированного пакета теряется хотя бы один пакет, то весь пакет будет переслан заново. Таким образом, это может привести к непропорциональным задержкам в сети.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/identif_flag_offset.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/identif_flag_offset.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Поля Identifier, Flags, Fragment Offset&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Time to Live&lt;/strong&gt; или просто &lt;em&gt;TTL&lt;/em&gt; - 8-битное поле, в которое записывается некоторое число в момент создания пакета.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/ttl.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/ttl.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Time to Live&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;По мере передачи пакета от одного маршрутизатора до другого, каждый из них будет уменьшать данное число. Если значение данного поля станет равным нулю, пакет будет отброшен и источнику пакета будет отправлено сообщение об ошибке пересылки. Данный механизм позволяет предотвратить бесконечное блуждание пакета по сети.&lt;/p&gt;

&lt;p&gt;Современные маршрутизаторы в независимости от задержки уменьшают значение TTL на единицу. Рекомендуемое значение по умолчанию 64. Однако, встречаются и другие реализации в зависимости от операционной системы.&lt;/p&gt;

&lt;p&gt;Некоторые утилиты для трасировки маршрута используют значение поля TTL. Пример выполнения трассировки приведён ниже:&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/traceroute.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/traceroute.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Traceroute&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Protocol&lt;/strong&gt; - 8-битное поле, определяющее номер вышестоящего протокола, которому предназначена передаваемая информация в пакете.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/protocol.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/protocol.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Protocol&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Ниже в таблице представлены одни из наиболее часто используемых протоколов, но данный список далеко не полный, каким может казаться на первый взгляд.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Номер протокола&lt;/th&gt;
      &lt;th&gt;Название протокола&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Internet Control Message Protocol - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ICMP&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Internet Group Management Protocol - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IGMP&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;IP in IP (encapsulation)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;6&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Transmission Control Protocol - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TCP&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;17&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;User Datagram Protocol - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UDP&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;47&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Generic Routing Encapsulation - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GRE&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;89&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Open Shortest Path First - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OSPF&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Header Checksum&lt;/strong&gt; - поле, определяющее ошибки в заголовке IP. Чексумма не вычисляется для содержимого IP пакета. Практически каждый вышестоящий протокол (&lt;em&gt;будь то TCP, UDP, ICMP, etc.&lt;/em&gt;) имеет свои механизмы вычисления ошибок.&lt;/p&gt;

&lt;p&gt;Данное поле представляет собой 16-битное значение, вычисляемое отправителем пакета. Принимающая сторона снова вычисляет данное значение и если значения сходятся, то считается, что чексумма &lt;em&gt;не битая&lt;/em&gt;.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/checksum.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/checksum.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Header Checksum&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p class=&quot;notice--info&quot;&gt;&lt;i class=&quot;fa fa-info-circle&quot;&gt;&lt;/i&gt;&lt;strong&gt; Важно:&lt;/strong&gt; стоит помнить, что каждый маршрутизатор уменьшает значение поля TTL, поэтому значение чексуммы должно рассчитывается на каждом маршрутизаторе! &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc1624&quot;&gt;RFC 1624&lt;/a&gt; более подробно описывает процесс вычисления чексуммы в протоколе IP.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Source and Destination Addresses&lt;/strong&gt; - 32-битный адреса источника и назначения пакета. Формат адресов представляет собой 4 десятичных числа от &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0&lt;/code&gt; до &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;255&lt;/code&gt;, разделенных точкой.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ip/src_dst.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ip/src_dst.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;&lt;strong&gt;Source and Destination IP Addresses&lt;/strong&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Options&lt;/strong&gt; - поле переменной длины, как следует из описания используется для дополнительных опций.&lt;/p&gt;

&lt;p&gt;Данное поле используется в основном для тестирования. Наиболее часто используемые опции:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;strong&gt;Loose source routing&lt;/strong&gt; - используется список IP-адресов, через которые должен пройти пакет, однако, на этом пути могут быть и другие адреса через которые не запрещено проходить&lt;/li&gt;
    &lt;li&gt;&lt;strong&gt;Strict source routing&lt;/strong&gt; - в отличие от предыдущего варианта, пакет должен пройти через строго отведенные адреса. В случае если следующий адрес не находится в списке адресов, то возникает ошибка.&lt;/li&gt;
    &lt;li&gt;&lt;strong&gt;Record route&lt;/strong&gt; - как и в случае трассировки маршрута, обеспечивает аналогичную функцию, за тем лишь исключением, что отображаются исходящие интерфейсы как на пути к месту назначения, так и на обратном пути. Данный механизм был показан ранее при выявлении &lt;a href=&quot;#Record Route&quot;&gt;максимального MTU в сети из нескольких устройств&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;strong&gt;Timestamp&lt;/strong&gt; - отличается от &lt;em&gt;Record route&lt;/em&gt; тем, что отслеживает не только где проходил пакет, но и когда.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Padding&lt;/strong&gt; - используется для наполнения заголовка нулями (&lt;em&gt;после поля Options&lt;/em&gt;), гарантируя, что граница конца заголовка проходит по 32 биту.&lt;/p&gt;

&lt;p&gt;Для подробного анализа трафика можно скачать файл с дампом трафика, открыть его с помощью анализатора трафика &lt;a href=&quot;https://www.wireshark.org/&quot;&gt;Wireshark&lt;/a&gt; и пройтись по тем полям, которые были описаны выше в данной статье.&lt;/p&gt;

&lt;p&gt;Также прикладываю файл топологий &lt;a href=&quot;https://www.eve-ng.net/&quot;&gt;Eve-Ng&lt;/a&gt;, которые я использовал для тестирования прохождения трафика в данной статье (&lt;em&gt;это лишь файл топологии, конфигурацию экспортировать нет возможности, т.к. у меня нет pro-версии Eve-Ng, но всегда можно обратиться ко мне напрямую и я поделюсь копипастом конфига. Образы устройств можно найти на просторах необъятного, а также использовать лицензионные образы устройств&lt;/em&gt;).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/assets/pcap/ip.pcap&quot;&gt;дамп трафика&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/assets/eve/lab1.zip&quot;&gt;топология eve-ng&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;P.S.&lt;/strong&gt; &lt;em&gt;вся информация представленная здесь используется исключительно в образовательных целях. Все совпадения с реальными объектами, адресами, именами и т.д. случайна и не несёт цели получить от этого выгоду или причинить кому-либо вред.&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="networks" /><category term="protocols" /><category term="ip" /><summary type="html">Формат заголовка протокола IP состоит из определённого набора полей, которые описаны в RFC 791. Разбор данных полей важен для понимания процесса маршрутизации. Ниже я опишу данные поля и постараюсь показать их в реальности, используя Wireshark.</summary></entry><entry><title type="html">RFC</title><link href="https://iteducate.github.io/networks/rfc/" rel="alternate" type="text/html" title="RFC" /><published>2021-09-24T09:00:00+03:00</published><updated>2021-09-24T09:00:00+03:00</updated><id>https://iteducate.github.io/networks/rfc</id><content type="html" xml:base="https://iteducate.github.io/networks/rfc/">&lt;p&gt;Список RFC, которые будут встречаться по ходу написания статей:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc791.html&quot;&gt;RFC 791 -  Internet Protocol&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc792.html&quot;&gt;RFC 792 -  Internet Control Message Protocol&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc826.html&quot;&gt;RFC 826 -  An Ethernet Address Resolution Protocol&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc925.html&quot;&gt;RFC 925 -  Multi-LAN Address Resolution&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc1027.html&quot;&gt;RFC 1027 -  Using ARP to Implement Transparent Subnet Gateways&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc1624&quot;&gt;RFC 1624 - Computation of the Internet Checksum via Incremental Update&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc1700.html&quot;&gt;RFC 1700 -  Assigned Numbers&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc3168.html&quot;&gt;RFC 3168 - The Addition of Explicit Congestion Notification (ECN) to IP&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>Ivan Denisenko</name></author><category term="networks" /><category term="rfc" /><summary type="html">Список RFC, которые будут встречаться по ходу написания статей:</summary></entry><entry><title type="html">Необычный взгляд на редактирование текста. Часть I.</title><link href="https://iteducate.github.io/editors/vim_1/" rel="alternate" type="text/html" title="Необычный взгляд на редактирование текста. Часть I." /><published>2019-11-11T09:00:00+03:00</published><updated>2019-11-11T09:00:00+03:00</updated><id>https://iteducate.github.io/editors/vim_1</id><content type="html" xml:base="https://iteducate.github.io/editors/vim_1/">&lt;p&gt;Каждому из нас хоть раз в жизни приходилось иметь дело с обработкой текстовых документов. Дело казалось бы обыденное, открыл &lt;em&gt;“офис”&lt;/em&gt; и вперёд, но некоторые до сих пор его не любят за то, что в нём куча ненужных для них вещей, а кто-то просто откровенно ими не умеет пользоваться. :)&lt;/p&gt;

&lt;p&gt;Данный набор советов не претендует на то, чтобы полностью заменить вам ваш привычный текстовый редактор. Однако здесь я покажу вам как с помощью бесплатной и самое главное мощной утилиты сделать редактирование текста максимально быстро и эффективно.&lt;/p&gt;

&lt;p&gt;Первое, что необходимо вам понимать, это то, что данная утилита довольно-таки сложна для начального уровня и требует некоторого понимая работы в &lt;strong&gt;командной строке&lt;/strong&gt; (&lt;em&gt;да, исходная программа, которая называется &lt;strong&gt;*vi&lt;/strong&gt;&lt;/em&gt;, не имеет графического интерфейса&lt;em&gt;). И хотя я буду показывать все примеры в командной строке, эти же примеры можно повторить в программе *Vim&lt;/em&gt;, которая как раз имеет данный графический интерфейс и немногим облегчит вам работу.&lt;/p&gt;

&lt;p&gt;Вторым пунктом я хотел бы выделить именно тот факт, что я не хочу чтобы вы уходили от того же MS Office, (&lt;em&gt;да и функционал в данной программе несколько иной&lt;/em&gt;), я лишь хочу показать то, как не имея лицензии на крупные программные продукты, а также надобности в &lt;em&gt;тяжелом&lt;/em&gt; редактировании текста, использовать действительно полезный и главное очень эффективный продукт.&lt;/p&gt;

&lt;p&gt;Итак, пустимся же в “весёлое приключение” по небольшой Вселенной Vi и Vim!&lt;/p&gt;

&lt;h1 id=&quot;1-это-необходимо-знать&quot;&gt;1. Это необходимо знать&lt;/h1&gt;

&lt;p&gt;Прежде чем приступить к написанию советов, хотелось бы остановиться на паре моментов, которые необходимо помнить.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Установка.&lt;/strong&gt; Скачать и установить ПО вы можете по &lt;a href=&quot;https://www.vim.org/download.php&quot; title=&quot;Download VIM&quot;&gt;&lt;strong&gt;данной ссылке&lt;/strong&gt;&lt;/a&gt;. Сложного в установке нет ничего, поэтому я верю в то, что вы справитесь. Я же буду использовать версию vi, которая есть в моем текстовом редакторе VS Code. Не пугайтесь! Всё, что я буду делать, вы сможете сделать и в Vim, установленный лично вами.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Примеры.&lt;/strong&gt; Всё, что я буду выполнять, будет сопровождаться gif-анимационным файлом, в котором будут показаны все клавиши, задействованные в данном примере. Это очень удобно, как мне кажется, и вы сможете всегда вернуться и разобрать непонятный вам материал (&lt;em&gt;хотя я очень верю, что такового не будет!&lt;/em&gt;). К сожалению, исходники самих примеров я выкладывать никуда не буду, поэтому вам придется на личных примерах разбираться как использовать ту или иную команду. Это поможет вам более тщательнее изучить весь материал и более подробно разобраться в интерфейсе и командах программы.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Слепая печать.&lt;/strong&gt; Пожалуй, это единственное условие, которое необходимо выполнить прежде чем приступить к изучению Vim. Вам действительно будет тяжело разобраться в некоторых моментах без данного навыка, так как эфффективность работы в данной программе достигается за счёт ловкости рук!&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;2-совет--1-повторение---мать-учения&quot;&gt;2. Совет № 1. Повторение - мать учения&lt;/h1&gt;

&lt;p&gt;В повседной работе мы не замечаем как часто выполняем одни и те же операции: &lt;em&gt;“скопировал - вставил”&lt;/em&gt;, &lt;em&gt;“скопировал - вставил”&lt;/em&gt; и так десятки, а то и сотни раз всеразличных комбинаций клавиш. Если мы сможем как-то упростить выполнение одних и тех же операций, то сэкономим большое количество времени.&lt;/p&gt;

&lt;p&gt;Редактор Vim позволяет отслеживать последние выполняемые операции и затем повторять их снова и снова, пока нам это будет необходимо. Однако, прежде чем приступить к редактированию какого-либо текста, необходимо упомянуть о двух основных режимах работы редактора Vim:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;командный режим&lt;/strong&gt; - обыкновенное состояние редактора, в котором выполняются все команды, за исключение главной функции редактора - &lt;strong&gt;&lt;em&gt;редактирование текста&lt;/em&gt;&lt;/strong&gt;. И это следует понимать, потому что очень часто возникают казусы, по которым люди не понимают различия в режимах и тем самым не могут найти решение в той или иной проблеме.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;режим вставки&lt;/strong&gt; - как понятно из названия, в данном режиме происходит набор необходимого нам текста.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;При входе в программу вы попадаете в &lt;strong&gt;командный режим&lt;/strong&gt;, а при нажатии клавиши &lt;code&gt;i&lt;/code&gt; в &lt;strong&gt;режим вставки&lt;/strong&gt;. Для того чтобы вернуться обратно в командный режим необходимо нажать клавишу &lt;code&gt;Esc&lt;/code&gt;. Как видим ничего сложного нет!&lt;/p&gt;

&lt;div class=&quot;notice--success&quot;&gt;
Как узнать в каком режиме вы сейчас находитесь? Очень просто, в режиме вставки в левом нижнем углу будет надпись &lt;code&gt;--ВСТАВКА--&lt;/code&gt; или &lt;code&gt;--INSERT--&lt;/code&gt; (если у вас установлена англоязычная версия). При выходе в командный режим данная надпись исчезает.
&lt;/div&gt;

&lt;p&gt;Итак, для того чтобы повторить последнее изменение, в редакторе Vim существует команда &lt;strong&gt;&lt;em&gt;“точка”&lt;/em&gt;&lt;/strong&gt;. Данная команда одна из самых мощных и гибких в редакторе. При этом, под &lt;em&gt;“последними изменениями”&lt;/em&gt; понимается изменение как над отдельными символами, целыми строками или даже файлами!&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Краткая справка по командам.&lt;/strong&gt;&lt;/p&gt;

  &lt;p&gt;Все команды выполняются в &lt;strong&gt;командном режиме&lt;/strong&gt;!&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;&lt;code&gt;h&lt;/code&gt; - шаг влево&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;j&lt;/code&gt; - шаг вниз&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;k&lt;/code&gt; - шаг вверх&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;l&lt;/code&gt; - шаг вправо&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;x&lt;/code&gt; - удаление символа под курсором&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;u&lt;/code&gt; - отменить последнее изменение&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;dd&lt;/code&gt; - удаление целой строки&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Текущие команды будут использоваться в нашем первом примере. Вы увидите каким образом происходит перемещение по файлу, удаление символа, строки, а также повторение этих же действий с использованием магической команды &lt;em&gt;“точка”&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;В качестве примера я возьму небольшую программу и в ней проведу все наши эксперименты.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/vim/dd.gif&quot;&gt;
          &lt;img src=&quot;/assets/images/vim/dd.gif&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;Пример 1. Демонстрация применения команды &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;точка&lt;/code&gt;
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Обратите внимание на то, где расположен курсор и какие изменения происходят после выполнения определенной команды. А еще лучше, возьмите произвольный текст и поиграйтесь сами, выполняя различные команды.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Замечание!!!&lt;/strong&gt; Для того чтобы выйти из данного редактора, особенно если вы выполняете упражнения в командной строке, необходимо выполнить одну из комбинаций клавиш:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;code&gt;:q!&lt;/code&gt; - выход из программы без сохранения&lt;/li&gt;
    &lt;li&gt;&lt;code&gt;:wq&lt;/code&gt; - выход из программы c сохранением&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;Не забывайте, что команды выполняются в &lt;strong&gt;командном режиме&lt;/strong&gt;!!!&lt;/p&gt;

  &lt;p&gt;Данная проблема очень популярна в интернете, так как начинающие пользователи не имеют представления как выйти из данного редактора. По этому поводу есть даже небольшая заметка в &lt;a href=&quot;https://stackoverflow.blog/2017/05/23/stack-overflow-helping-one-million-developers-exit-vim/&quot;&gt;блоге stackoverflow&lt;/a&gt;. Там отмечено, что помощью по вопросу выхода из Vim воспользовалось более 1 млн. человек!!!&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>Ivan Denisenko</name></author><category term="editors" /><category term="vim" /><summary type="html">Каждому из нас хоть раз в жизни приходилось иметь дело с обработкой текстовых документов. Дело казалось бы обыденное, открыл “офис” и вперёд, но некоторые до сих пор его не любят за то, что в нём куча ненужных для них вещей, а кто-то просто откровенно ими не умеет пользоваться. :)</summary></entry><entry><title type="html">Основные понятия в области безопасности автоматизированных систем</title><link href="https://iteducate.github.io/%D0%B8%D0%B1/inform_security_1_2/" rel="alternate" type="text/html" title="Основные понятия в области безопасности автоматизированных систем" /><published>2019-10-28T11:00:00+03:00</published><updated>2019-10-28T11:00:00+03:00</updated><id>https://iteducate.github.io/%D0%B8%D0%B1/inform_security_1_2</id><content type="html" xml:base="https://iteducate.github.io/%D0%B8%D0%B1/inform_security_1_2/">&lt;p&gt;Вторая статья первого цикла информационной безопасности будет посвящена краткому обзору основных понятий, касающихся безопасности АСУ. Постараюсь сделать её краткой и изложить весь представленный материал максимально лаконично.  Первоначальных вопросов будет 6, в дальнейшем их количество может измениться. Погнали!&lt;/p&gt;

&lt;p&gt;Начиная работать в области защиты информации, вам как специалисту в этой области необходимо ориентироваться в руководящей документации, &lt;em&gt;а этой в основном различные стандарты&lt;/em&gt;, которые помогут вам уяснять все тонкости вашей профессии. Да, порой это не так интересно, да, хочется не обращать на это внимание, но без ГОСТ’ов, к сожалению, никуда. В них содержится почти вся информация, необходимая для организации безопасности, а также при расследовании инцидентов, связанных с нарушением политики безопасности организации.&lt;/p&gt;

&lt;p&gt;Первый стандарт с которым нам придется столкнуться расположен &lt;a href=&quot;http://docs.cntd.ru/document/1200101777&quot; title=&quot;Информационная технология (ИТ). Методы и средства обеспечения безопасности. Критерии оценки безопасности информационных технологий.&quot;&gt;&lt;strong&gt;по данной ссылке&lt;/strong&gt;&lt;/a&gt; (&lt;em&gt;Информационная технология (ИТ). Методы и средства обеспечения безопасности. Критерии оценки безопасности информационных технологий.&lt;/em&gt;). В данном документе представлены основные понятия безопасности и их взаимосвязь. Приступим к рассмотрению наших вопросов.&lt;/p&gt;

&lt;h1 id=&quot;1-определение-безопасности&quot;&gt;1. Определение безопасности&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Безопасность.&lt;/em&gt;&lt;/strong&gt; Как часто вам приходится слышать данное слово? Самым простым определением безопасности можно предположить как &lt;strong&gt;отсутствие опасностей&lt;/strong&gt;. Однако, такое определение не совсем корректно отображает текущую реальность. Более точно определение безопасности можно дать следующим образом.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Безопасность&lt;/strong&gt; - защищенность от опасностей, а вернее защищенность от возможного ущерба, наносимого при возможной реализации любых угроз.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a name=&quot;groza&quot;&gt;Угрозы могут нанести следующие виды ущерба:&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Материальный&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Моральный&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Физический&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Причём субъектом ущерба в конечном счёте всё равно станет &lt;em&gt;человек&lt;/em&gt;. Даже если вред был нанесен непосредственно не человеку, то косвенный ущерб прилетит сотруднику организации.&lt;/p&gt;

&lt;h1 id=&quot;2-понятия-автоматизированной-системы-и-безопасности-автоматизированной-системы&quot;&gt;2. Понятия автоматизированной системы и безопасности автоматизированной системы&lt;/h1&gt;

&lt;p&gt;С самого начала мы оперируем понятием &lt;em&gt;автоматизированная система&lt;/em&gt;. При этом мы ни разу не раскрывали данное понятие. Дадим наконец определение данному термину.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Автоматизированная система&lt;/strong&gt; - организационно-техническая система, которая представляет собой совокупность определенных компонентов, способная выполнять автоматизированную обработку информации с целью удовлетворения информационных потребностей субъектов информационных отношений.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;В общем случае можно выделить 4 основных компонента автоматизированной системы:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Технические средства обработки и передачи данных&lt;/strong&gt; - &lt;em&gt;(всеразличное техническое оборудование, сервера, персональные компьютеры, сетевое оборудование и др.)&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Программное обеспечение&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Информация, хранящаяся на различных носителях&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Персонал&lt;/strong&gt; - &lt;em&gt;конечные пользователи и обслуживающие организации&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Раскрыв понятие автоматизированной системы можно дать понятие безопасности автоматизированной системы.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Безопасность автоматизированной системы&lt;/strong&gt; - защищенность всех её &lt;strong&gt;компонентов&lt;/strong&gt; от различного рода нежелательного воздействия.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;3-определение-информации-и-информационных-ресурсов&quot;&gt;3. Определение информации и информационных ресурсов&lt;/h1&gt;

&lt;p&gt;При выполнении мероприятий по защите автоматизированной системы мы сталкиваемся с таким понятием как &lt;strong&gt;&lt;em&gt;информация&lt;/em&gt;&lt;/strong&gt;, которая является одним из главных компонентов автоматизированной системы. Дадим определение понятию &lt;em&gt;информация&lt;/em&gt; и &lt;em&gt;информационные ресурсы&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Информация&lt;/strong&gt; - всевозможные сведения о фактах, событиях, процессах и явлениях, о состояниях объектов в какой-либой определенной предметной области.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;На основе информации принимаются те или иные решения, которые помогают оптимизировать процесс управления автоматизированной системой. Информация может иметь различные свойства (&lt;em&gt;о некоторых из них мы поговорим позже&lt;/em&gt;), при этом этими свойствами можно управлять для того чтобы получить необходимый нам результат в принятии решений.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Информационные ресурсы&lt;/strong&gt; - различные отдельные документы, а также наборы (массивы) документов в информационных системах.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;4-категории-субъектов-информационных-отношений&quot;&gt;4. Категории субъектов информационных отношений&lt;/h1&gt;

&lt;p&gt;В момент когда происходит взаимодействие с информационными ресурсами, &lt;strong&gt;субъекты&lt;/strong&gt; находятся в разного рода отношениях (&lt;em&gt;касающиеся именно вопросов взаимодействия с информацией&lt;/em&gt;). Такие отношения, как некоторые уже догодались, называются &lt;strong&gt;&lt;em&gt;информационными отношениями&lt;/em&gt;&lt;/strong&gt;, а субъекты, которые в них участвуют - &lt;strong&gt;&lt;em&gt;субъектами информационных отношений&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Существует 3 основные категории субъектов информационных отношений:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Государство&lt;/strong&gt; - сюда включается как государство в целом, так все его ответвления в виде различных ведомств, органов и организаций.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Юридические лица и объединения&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Физические лица&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Каждый из субъектов информационного взаимодействия по отношению к определенной информации может выступать как &lt;strong&gt;источником информации&lt;/strong&gt;, так и &lt;strong&gt;потребителем информации&lt;/strong&gt;, а в некоторых моментах одновременно принимать обе стороны.&lt;/p&gt;

&lt;h1 id=&quot;5-три-свойства-информационной-безопасности---конфиденциальность-целостность-доступность&quot;&gt;5. Три свойства информационной безопасности - конфиденциальность, целостность, доступность&lt;/h1&gt;

&lt;p&gt;При рассмотрении свойств информации каждый уважающий себя специалист по защите информации должен помнить 3 главных &lt;em&gt;кита&lt;/em&gt; на которых держится безопасность. В английском языке данной &lt;em&gt;тройке&lt;/em&gt; даже выделено специальное определение &lt;a href=&quot;https://www.varonis.com/blog/cia-triad/&quot; title=&quot;Определение CIA&quot;&gt;CIA Triad&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/ib/cia.png&quot; alt=&quot;CIA&quot; title=&quot;CIA&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Рассмотрим вкратце каждое из свойств.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Конфиденциальность.&lt;/strong&gt; Свойство информации, позволяющее ограничить круг субъектов, имеющих доступ к информации, а также сохранить данную информацию в тайне от субъектов, не имеющих прав на доступ к таковой информации.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;если говорить кратко, то это сохранение в тайне определенной части информации&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Целостность.&lt;/strong&gt; Свойство информации, позволяющее существовать данной информации в неискаженном виде (&lt;em&gt;по отношению к некоторому фиксированную состоянию&lt;/em&gt;).&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Доступность.&lt;/strong&gt; Свойство информации, позволяющее обеспечить своевременный доступ  субъектов к интересующей их информации, когда в этом возникает необходимость.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;при этом субъекты как вы понимаете должны удовлетворять свойству конфиденциальности, т.е. иметь право на доступ к требуемой информации&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;6-цели-защиты-автоматизированной-системы-и-информации-циркулирующей-в-ас&quot;&gt;6. Цели защиты автоматизированной системы и информации, циркулирующей в АС&lt;/h1&gt;

&lt;p&gt;Крайний вопрос, который сегодня рассмотрим, касается целей защиты АС и информации, которая находится в АС.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Цель обеспечения безопасности АС&lt;/strong&gt; - защита субъектов данной АС, которые непосредственно участвуют в процессах информационного взаимодействия, от нанесения им различного рода ущерба (&lt;a href=&quot;#groza&quot;&gt;смотри здесь&lt;/a&gt;) в результате какого-либо воздействия на информацию и системы АС.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Цель защиты информации, находящейся в АС&lt;/strong&gt; - предотвращение утечки, искажения, утраты, блокирования или незаконного распространения информации.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;Статья получилась небольшой, да и затрагивает в основном теоретические сведения, касающиеся защиты информации в автоматизированной системе. Для себя уже выделил данный материал и понял, что практику придется рассмотривать иным способом. В скором времени буду выкладывать наработки того, что прохожу сам и как отрабатываю практические навыки в этом.&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="ИБ" /><category term="security" /><category term="theory" /><summary type="html">Вторая статья первого цикла информационной безопасности будет посвящена краткому обзору основных понятий, касающихся безопасности АСУ. Постараюсь сделать её краткой и изложить весь представленный материал максимально лаконично. Первоначальных вопросов будет 6, в дальнейшем их количество может измениться. Погнали!</summary></entry><entry><title type="html">Проблемы обеспечения безопасности автоматизированных систем</title><link href="https://iteducate.github.io/%D0%B8%D0%B1/inform_security_1_1/" rel="alternate" type="text/html" title="Проблемы обеспечения безопасности автоматизированных систем" /><published>2019-10-11T21:00:00+03:00</published><updated>2019-10-11T21:00:00+03:00</updated><id>https://iteducate.github.io/%D0%B8%D0%B1/inform_security_1_1</id><content type="html" xml:base="https://iteducate.github.io/%D0%B8%D0%B1/inform_security_1_1/">&lt;p&gt;Данная статья является продолжение того пути, который я начал в далёком 2012 году, поступив на специальность, связанную с обеспечением компьютерной безопасности в различных областях. К сожалению, университет так и остался университетом…&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Предисловие&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Большая часть моей учебной деятельности была так или иначе связана с безопасностью. И именно желание понять то как защитить эту 
информацию послужило причиной по которой я поступил на свою специальность. Время шло, дисциплины пролетали за дисциплиной, а знания
так и оставались где-то в облаках. Я понимал, что настанет время и мне придется заниматься тем на кого я учусь и порой мне становилось
стыдно от того какие я знания получаю, вернее “незнания”. Возможно именно тогда и появилось внутри желание получать эти знания
так, как я это делаю сейчас.&lt;/em&gt;&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;Я хочу быть если не высококвалифицированным специалистом в своей области, но хотя бы “не падать каждый раз в грязь лицом”, когда речь
заходит о моей профессиональной области и я не могу поддерживать в ней разговор, не говоря уже о комплексной защите и понимании того, как следует всё реализовать.&lt;/em&gt;&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;К сожалению, речь здесь не только о безопасности, другие области, которые мне интересны и в которых я не особо силён, здесь также будут затронуты. Я верю, что данный формат должен помочь как мне, так и другим людям, которые когда-нибудь прочтут данные материалы.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Формат данных статей будет предполагать рассмотрение определённых тематик и на каждую из них будет предложено чёткое определение того, 
что необходимо в них знать и понимать. Не рассчитывайте на большое количество вопросов и ответов в краткий срок. Я делаю это в
первую очередь для себя и пока я лично сам не разберусь, не пойму суть и не запомню всего значения данной проблемы, к другой тематике я переходить не стану.&lt;/p&gt;

&lt;p&gt;Первые темы будут не самыми интересными, однако, это необходимая база, которую необходимо знать и грамотно изъясняться в  профессиональной области. В самом начале статьи будет список вопросов с навигацией и далее по каждому из вопросов будет дан развёрнутый ответ. Количество вопросов в каждой статье может варьироваться и обычно составляет 5-10. Статья может быть разбита на несколько частей, но это зависит от материала, который я буду использовать.&lt;/p&gt;

&lt;p&gt;Всё остальное будет раскрываться непосредственно из статьи и если что-то новое будет происходить, то вы это поймете, читая заметки или какой-либо другой материал. На этом всё, пора переходить к вопросам. А их в нашей первой статье аж 8!&lt;/p&gt;

&lt;h1 id=&quot;1-место-и-роль-автоматизированных-систем-в-управлении-бизнес-процессами&quot;&gt;1. Место и роль автоматизированных систем в управлении бизнес-процессами&lt;/h1&gt;

&lt;p&gt;Безопасность такое понятие, которое редко затрагивает одного человека и касается только одного человека. Лишь малая часть населения понимает, что это такое и вообще для чего безопасность нужна, а уж как образом она достигается знают наверное единицы (в общем проценте от населения планеты). Мы вспоминаем о безопасности наших данных только тогда как где-нибудь в мире или нашей стране происходит утечка информации, персональных данных, коммерческой или гос. тайны. Вот вам &lt;a href=&quot;https://meduza.io/news/2019/10/03/kommersant-dannye-60-millionov-klientov-sberbanka-utekli-v-set&quot; title=&quot;Утечка 60 млн. карт в Сбербанке&quot;&gt;&lt;strong&gt;недавний пример&lt;/strong&gt;&lt;/a&gt;, который произошел по непонятно чьей вине, таких примеров вагон и маленькая тележка. Однако, не все данные события освещаются его величеством Интернетом, многие происходят на уровне небольших организаций, которые незамедлительно стараются такие события прикрыть чтобы о них никто не узнал.&lt;/p&gt;

&lt;p&gt;Так вот, как упомянулось выше, организация безопасности не направлена на какого-то конкретного человека, она касается целой области не только людей и их данных, но и целых процессов, которые управляют всем бизнесом организации. При этом вся организация управлением безопасности также ложится не на хрупкие плечи человека, а уже на целую систему, которая непосредственно сначала создается, а затем управляется людьми.&lt;/p&gt;

&lt;p&gt;Компьютерные технологии лишь дают возможность произвести автоматизацию процессов управления и не более. Это позволяет сэкономить многие ресурсы, а самый главный человеческий ресурс - время. С учётом повышения объема поступающих сведений, необходимо повышать качество и эффективность управления всей системы в целом.&lt;/p&gt;

&lt;p&gt;Из-за широкого применения автоматизированных систем в организациях, требования к защите систем, использующихся в управлении бизнес-процессами, многократно увеличиваются, а каждая неполадка может вылиться организации в крупные финансовые потери, и это только в лучшем случае.&lt;/p&gt;

&lt;p&gt;Первое, что следует понимать, это то, что любая &lt;strong&gt;автоматизированная информационная система&lt;/strong&gt; (&lt;em&gt;АИС&lt;/em&gt;) является частью &lt;strong&gt;автоматизированной системы управления&lt;/strong&gt; (&lt;em&gt;АСУ&lt;/em&gt;). Это значит, что в АСУ может быть несколько АИС и каждая из них занимается разными вещами.&lt;/p&gt;

&lt;p&gt;Любое действие с информацией, которое приводит к нарушению безопасности (искажение, разглашение, уничтожение и т.д. и т.п.), может нанести как &lt;strong&gt;материальный&lt;/strong&gt;, так и &lt;strong&gt;моральный&lt;/strong&gt; вред многим субъектам, которые имеют отношение к данной информации.&lt;/p&gt;

&lt;p&gt;При этом, каждую автоматизированную систему приходится настраивать таким образом, чтобы определенная часть информации была бы легко доступна всем кто в этом нуждается, и в то же время надежна защищена, а действия самой системы не приводили к нарушению безопасности.&lt;/p&gt;

&lt;h1 id=&quot;2-факторы-которые-определяют-актуальность-проблемы-защиты-автоматизированных-систем-в-современных-условиях&quot;&gt;2. Факторы, которые определяют актуальность проблемы защиты автоматизированных систем в современных условиях&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Порой некоторые моменты моей учёбы проходили настолько скучно, что хотелось просто сбежать с пар. Теперь я понимаю что - нежелание воспринимать некоторую скучную и неинтересную информацию. Так случилось и здесь, есть вопросы, которые наводят скуку и которые не очень и хочется рассказывать, однако, эти вопросы позволяют глубже разобраться в причине того почему всё так происходит. Данные вещи я буду стараться описывать максимально сжато и так как их вижу лично я.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Итак, &lt;strong&gt;факторы&lt;/strong&gt; благодаря которым проблема защиты АС как никогда является актуальной. Их на самом деле очень много, кадждый специалист может найти что-то новое для себя, так и добавить свои взгляды на это. Я же приведу следующий список:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Увеличение области использования компьютерной техники. Наверное нет ни одной организации, в которой бы не было ПК, а чем большое количество техники используется в организации, тем больше потребности возникает как у самой организации, так и у людей.&lt;/li&gt;
  &lt;li&gt;Увеличение числа электронных носителей информации, а как следствие, хранение на данных носителях большого количества информации.&lt;/li&gt;
  &lt;li&gt;Повышение доверия со стороны людей к автоматизированным системам управления, что может привести к тому, что эти системы управления могут быть задействованы в критически важных областях, в которых важно именно воздействие человека, а не машины.&lt;/li&gt;
  &lt;li&gt;Развитие многообразных видов угроз, а также возникновение новых способов несанкционированного доступа к информации. В сочетании с большим количеством носителей, данный фактор является особо важным.&lt;/li&gt;
  &lt;li&gt;Повышение уровня образованности и квалифицированности людей, “благодаря” которым и возникают всеразличные угрозы и способы дестабилизирующие автоматизированные системы.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;3-причины-обострения-проблемы-обеспечения-информационной-безопасности&quot;&gt;3. Причины обострения проблемы обеспечения информационной безопасности&lt;/h1&gt;

&lt;p&gt;Исходя их тех факторов, которые я перечислил выше, можно привести некоторые причины, по которым происходит обострение проблемы обеспечения ИБ (в некотором роде они буду повторять сами факторы):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Возрастание уровня доверия к АСУ - одна из самых главных причин. Главное заблуждение людей, они думают, что машины могут сделать всё за них и им не придется ни в чём разбираться. К сожалению, такая схема автоматически обречена на провал.&lt;/li&gt;
  &lt;li&gt;Бурное развитие информационно-телекоммуникационных сетей (&lt;a href=&quot;https://www.web-canape.ru/business/vsya-statistika-interneta-na-2019-god-v-mire-i-v-rossii/&quot;&gt;&lt;strong&gt;здесь можно найти интересную статистику по Интернету в России и в мире&lt;/strong&gt;&lt;/a&gt;).&lt;/li&gt;
  &lt;li&gt;Развитие компьютерной грамотности во всех слоях населения. Первая часть населения развивает и применяет различные виды угроз (это профессионалы в своей деятельности), вторая часть, просто за счёт того, что они “якобы” всё знают, начинают применять свои знания не там где это необходимо, тем самым, открывая лазейки злоумышленникам.&lt;/li&gt;
  &lt;li&gt;Отсутствие &lt;strong&gt;нормального&lt;/strong&gt; законодательно-правового регулирования отношений, возникающих в условиях возникновения “компьютерных преступлений”.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;4-причины-по-которым-проблема-обеспечения-безопасности-автоматизированных-систем-относится-к-числу-трудноразрешимых&quot;&gt;4. Причины по которым проблема обеспечения безопасности автоматизированных систем относится к числу трудноразрешимых&lt;/h1&gt;

&lt;p&gt;Трудноразрешимость проблемы обеспечения безопасности выражена многими обстоятельствами, где-то случайными, где-то закономерными, но в большинстве случаев она связана с человеческим фактором, вот лишь некоторые из обстоятельств:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Непонимание того, что необходимо защищать АС, которой пользуется организация. Организация считает, что их информация никому не нужна, либо, что их система надёжна защищена.&lt;/li&gt;
  &lt;li&gt;Неопределенные риски при использовании новых АС. Связано это с неизвестностью того какие угрозы могут оказывать своё влияние на новую АС.&lt;/li&gt;
  &lt;li&gt;Необходимость использовать комплексный подход в защите АС. В большинстве случае защищается отдельная часть АС, либо применяется только одна из мер по защите АС, что является неправильным подход и влечёт лишь пустые расходы в защите АС.&lt;/li&gt;
  &lt;li&gt;Неравные возможности средств и методов защиты и нападения. При защите АС всегда следует понимать, что в большинстве случае злоумышленник имеет больше возможности в нападении, чем мы в защите.&lt;/li&gt;
  &lt;li&gt;Как следствие из предыдущего пункта, недостаточное количество специалистов компьютерной безопасности, и в целом низким количеством людей, котороые осведомлены в вопросах безопасности информационных технологий.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;5-риск-информационной-безопасности-составляющие-риска&quot;&gt;5. Риск информационной безопасности. Составляющие риска&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Все предыдущие выкладки были сделаны для того, чтобы дать чёткое представление о том, что невозможно создать абсолютно непреодолимую систему защиты информации. Это всегда стоит помнить в первую очередь и как специалисту по безопасности каждый раз напоминать своему руководству об этом. Нет единой концепции защиты информации, есть отдельные АС, есть то из чего они состоят, есть возможность использовать продукты, которые помогут снизить вероятность успешной реализации угрозы на отдельные объекты, составляющие данную АС.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Специалисту по безопасности часто приходится оперировать различными понятиями, определениями, поэтому необходимо грамотно представлять что это такое, когда о них заходит речь. Так вот и мы, постепенно будем себя приучать к ним.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Определения&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Угроза&lt;/strong&gt; - потенциально возможное событие, вызванное действием, процессом или явлением, которое может привести к нанесению ущерба чьим-либо интересам.&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;Риск&lt;/strong&gt; - оценка опасности определенной угрозы.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Риск оценивает насколько опасна та или иная угроза. Как она это делает - отдельный вопрос. В общем случае, риск выражает &lt;strong&gt;вероятностно-стоимостную&lt;/strong&gt; оценку возможных потерь от конкретной угрозы. Как мы видим риск состоит из двух составляющих:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;вероятность успешной реализации угрозы - всегда измеряется от &lt;strong&gt;0&lt;/strong&gt; (&lt;em&gt;провал&lt;/em&gt;) до &lt;strong&gt;1&lt;/strong&gt; (&lt;em&gt;успех&lt;/em&gt;)&lt;/li&gt;
  &lt;li&gt;стоимость потерь, либо по иному ущерба, от реализации угрозы - выражается вероятнее всего в денежном эквиваленте&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Как видно из определения, в формулировке риска участвует всего лишь две составляющие, они же участвуют при расчете суммарной стоимостной оценки информационной безопасности организации. Нетрудно догадаться, что здесь будут участвовать все возможные риски, которые специалист по защите информации примет в расчет. И выражать он будет лишь количественную сторону риска, а он как мы уже убедились состоит еще и из качественной составляющей, выражающейся вероятностью.&lt;/p&gt;

&lt;p&gt;Итак, &lt;strong&gt;&lt;em&gt;стоимостная составляющая информационной безопасности&lt;/em&gt;&lt;/strong&gt; расчитывается по формуле:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/ib/risk.svg&quot; alt=&quot;Стоимостная составляющая информационной безопасности&quot; title=&quot;Стоимостная составляющая информационной безопасности&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;n&lt;/strong&gt; - количество всех принятых во внимание рисков&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;A&lt;/strong&gt; - вероятностная оценка риска.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;В&lt;/strong&gt; - стоимостная оценка риска.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;С&lt;/strong&gt; - стоимость реализации мер защиты.&lt;/li&gt;
  &lt;li&gt;&lt;i&gt;R&lt;sub&gt;max&lt;/sub&gt;&lt;/i&gt; - допустимые издержки.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;6-анализ-рисков-и-управление-ими-этапы-анализа-и-управления&quot;&gt;6. Анализ рисков и управление ими. Этапы анализа и управления&lt;/h1&gt;

&lt;p&gt;Риски позволяют на ранней стадии выявить необходимость в применении дополнительных мер по обеспечению безопасности АС. Однако, для того чтобы такая схема работала, следует чётко представлять состав АС организации, тем более если это новая внедренная АС.&lt;/p&gt;

&lt;p&gt;Как мы уже выяснили ранее, риск не может быть один, даже если брать отдельный компонент АС, то на него может быть направлено более одной угрозы. Для того чтобы оценить опасность каждой угрозы используется такое понятие как &lt;strong&gt;анализ рисков&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Определение&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Анализ рисков&lt;/strong&gt; - выявление существующих угроз и оценка их опасности.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Во время проведения анализа рисков специалист по защите информации выявляет все значимые угрозы, т.е. это такие угрозы, у которых высокая вероятность реализации и/или приводящие к значительным потерям.&lt;/p&gt;

&lt;p&gt;Из анализа рисков вытекает главное направление управления рисками. &lt;strong&gt;Управление рисками&lt;/strong&gt; представляет собой &lt;em&gt;суть защиты ресурсов автономной системы&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Как уже упоминалось в предыдущем вопросе, риск можно анализировать двумя способами: &lt;strong&gt;&lt;em&gt;качественно&lt;/em&gt;&lt;/strong&gt; и &lt;strong&gt;&lt;em&gt;количественно&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Количественный способ&lt;/strong&gt; оценки рисков более нагляден для представления, однако, он же и более труднореализуем в виду следующих осложнений:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Трудность в оценке ущерба нематериальных активов.&lt;/strong&gt; Как правильно оценить информацию? Сколько стоит идея руководства? Почему идея руководящего состава может быть дороже моей идеи и наоборот? По чём сегодня конфиденциальность? А завтра она может быть дороже или дешевле? И таких вопросов не одна дюжина.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Сложность оценки косвенных потерь от реализации угрозы.&lt;/strong&gt; В зависимости от способа реализации угрозы потери могут проявиться как в различных областях АС, так и просто в инфраструктуре организации не связанной с АС. Ранее мы видели, что на отдельный компонент АС может быть направлено различное количество угроз. Следовательно, риск не учесть какую-либо угрозу велик, поэтому к определению угроз необходимо подходить грамотно, так как от этого зависит дальнейший расчет как оценки опасности реализации угрозы, так и возможный ущерб от реализации угрозы.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Обесценивание результатов длительной качественной оценки рисков.&lt;/strong&gt; Ну тут думаю и так всё понятно.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;В виду сложности реализации количественного подхода, в настоящее время используется именно &lt;strong&gt;качественный подход&lt;/strong&gt; при анализе рисков. Он предполагает простое разграничение рисков по степени их опасности.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Определение&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Управление рисками&lt;/strong&gt; - принятие мер защиты, направленных на снижение частоты успешной реализации угроз.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Анализ рисков и управление ими состоит из следующих &lt;strong&gt;этапов:&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Определение границы автоматизируемой системы, а также методологии (&lt;em&gt;количественный или качественный подход&lt;/em&gt;) оценки существующих рисков.&lt;/li&gt;
  &lt;li&gt;Идентификация и оценка информационных ресурсов автоматизированной системы.&lt;/li&gt;
  &lt;li&gt;Идентификация угроз и оценка вероятностей их реализации.&lt;/li&gt;
  &lt;li&gt;Определение риска и выбор средств защиты.&lt;/li&gt;
  &lt;li&gt;Внедрение средств защиты и оценка остаточного риска.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;7-требования-к-методам-оценки-целесообразности-затрат-на-обеспечение-безопасности-автоматизированных-систем&quot;&gt;7. Требования к методам оценки целесообразности затрат на обеспечение безопасности автоматизированных систем&lt;/h1&gt;

&lt;p&gt;Итак, для того чтобы применить определённую политику безопасности в своей организации, вам, как специалисту, необходимо чётко представлять насколько целесообразно будет вкладывать в вашу политику средства на её реализацию, а также дальнейшее развитие и поддержание. В сети существует масса требований по оценке целесообразности затрат, однако, я постараюсь простым языком объяснить на что следует обращать внимание.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Так как практическая оценка рисков в большинстве случаев производится &lt;em&gt;качественным способом&lt;/em&gt;, то оценку затрат необходимо производить &lt;em&gt;количественным способом&lt;/em&gt;, при этом опираясь на качественные показатели оценки вероятности событий.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Вы как представитель безопасности должны максимально &lt;em&gt;прозрачно&lt;/em&gt; определять все расходы, используемые в вашем методе оценке затрат, для того чтобы не только вы имели представление о том какие механизмы будут использоваться в защите, а также сколько они стоят и какой будут иметь эффект в будущем, но и например ваше руководство. Это необходимо для того, чтобы в дальнейшем к вам было меньше вопросов по поводу последствий, которые могут произойти в виду двух вещей: &lt;strong&gt;вашей некомпетентности как специалиста&lt;/strong&gt;, либо &lt;strong&gt;отсутствия мозгов у руководства, которое не выделило необходимые средства на обеспечение должного уровня защиты данных в организации.&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Ваш метод должен быть &lt;em&gt;универсальным&lt;/em&gt;. Это значит, что вы можете применить данный метод как к оценке расходов на приобретение программного или аппаратного обеспечения, но также и при оценке затрат на обучение внутреннего персонала и др.. Сложная задача, так как необходимо учитывать комплексное подход при обеспечении безопасности, а не какую-либо отдельную часть.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;8-категории-затрат-связанных-с-безопасностью-автоматизированных-систем&quot;&gt;8. Категории затрат, связанных с безопасностью автоматизированных систем&lt;/h1&gt;

&lt;p&gt;Мы выяснили, что необходимо соблюдать определенные требования при формировании защиты в организации, так как неопределенные расходы могут вызвать вопросы у руководства. В конце первой статьи давайте рассмотрим какие &lt;strong&gt;категории затрат&lt;/strong&gt; выделяются при формировании первоначального проекта обеспечения безопасности в организации. В конце данного вопроса вы сами убедитесь в том, что обеспечение информационной безопасности очень и очень дорогостоящее &lt;em&gt;мероприятие&lt;/em&gt;, если это так можно назвать. При этом неправильный выбор того, что необходимо сделать в каждой категории может повлечь как неудобство в дальнейшей работе, так и колоссальные расходы.&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/ib/cat.png&quot;&gt;
          &lt;img src=&quot;/assets/images/ib/cat.png&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
    &lt;figcaption&gt;Категории затрат на обеспечение ИБ
&lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Итак, на картинке выше представлены все возможные категории затрат, которые следует учитывать при построении определенной защиты автоматизированной системы в организации. В настоящий момент расписывать каждый пункт в возможной категории не имеет смысла, так как они могут меняться в зависимости от появления новых угроз, да и при желании по каждой категории можно самому составить необходимые вам списки затрат.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Первая статья наконец завершена! Тяжело и может не особо интересно, но опыт всегда есть опыт, каким бы он ни был. Хочется (лично для себя) больше практической составляющей, но в данном случае таковой будет немного, потому что начинать с практики не имея теоретических знаний неправильно. Надеюсь, что данная статья принесла хоть кому-либо пользу и сподвигла вас на первый толчок в какой-либо области обучения.&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="ИБ" /><category term="security" /><category term="theory" /><summary type="html">Данная статья является продолжение того пути, который я начал в далёком 2012 году, поступив на специальность, связанную с обеспечением компьютерной безопасности в различных областях. К сожалению, университет так и остался университетом…</summary></entry><entry><title type="html">Как приобретать друзей и оказывать влияние на людей. Глава 1.</title><link href="https://iteducate.github.io/%D0%BF%D1%81%D0%B8%D1%85%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F/how_to_get_friends_ch_01/" rel="alternate" type="text/html" title="Как приобретать друзей и оказывать влияние на людей. Глава 1." /><published>2017-12-04T16:00:00+03:00</published><updated>2017-12-04T16:00:00+03:00</updated><id>https://iteducate.github.io/%D0%BF%D1%81%D0%B8%D1%85%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F/how_to_get_friends_ch_01</id><content type="html" xml:base="https://iteducate.github.io/%D0%BF%D1%81%D0%B8%D1%85%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F/how_to_get_friends_ch_01/">&lt;p&gt;Данная статья является началом анализа и выявления ключевых моментов (для самого себя) в книге популярного американского писателя Дейла Карнеги “Как приобретать друзей и оказывать влияние на людей”. Дейл Карнеги основал собственную концепцию бесконфликтного общения, которая очень популярна в настоящее время.&lt;/p&gt;

&lt;p&gt;Вся книга состоит из 6 частей, в каждой из которых содержится определённое количество глав. Каждая глава будет тщательно прочитана на бумажном носителе и не один раз, затем для каждой главы будут выделены ключевые отрезки, и уже из них составлена статья, которая на мой взгляд несёт главную мысль данной главы.&lt;/p&gt;

&lt;p&gt;Как не странно, первая глава настоящей книги начинается со взаимоотношений между людьми. Конечно не такими, как того ожидают читатели и тем это интереснее. Представьте ситуацию, когда человек совершает противоправное действие. Какие чувства испытывает этот человек, что чувствует и что побуждает его на такие поступки? За всем этим может скрываться не один десяток мотивов, главное, что всех этих людей будет связывать одна общая черта! Мало того, данная черта присуща 99% людей. Так что же это такое? Хотите узнать, добро пожаловать в данную статью.&lt;/p&gt;

&lt;p&gt;А пока представьте три реальные ситуации, которые произошли в начале 20 века. Ниже описаны люди, которые были задействованы, как главные герои этих ситуаций (где-то будет некоторое описание этих лиц, а где-то просто ссылки, где вы можете сами ознакомиться более подробно). Так вот, это были &lt;a href=&quot;https://en.wikipedia.org/wiki/Francis_Crowley&quot; title=&quot;Фрэнсис Кроули&quot;&gt;Фрэнсис Кроули по кличке “Два ствола”&lt;/a&gt;, &lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D1%8C_%D0%9A%D0%B0%D0%BF%D0%BE%D0%BD%D0%B5&quot;&gt;Аль Капоне&lt;/a&gt; и Голландец (а в самой книге Карнеги он почему-то “Немец”) &lt;a href=&quot;https://ru.wikipedia.org/wiki/%D0%93%D0%BE%D0%BB%D0%BB%D0%B0%D0%BD%D0%B4%D0%B5%D1%86_%D0%A8%D1%83%D0%BB%D1%8C%D1%86&quot;&gt;Шульц&lt;/a&gt;. Теперь подробнее о каждой криминальной ситуации (да-да именно криминальные ситуации и связывают этих людей).&lt;/p&gt;

&lt;figure class=&quot; &quot;&gt;
  
    
      &lt;a href=&quot;/assets/images/psych/kroul.jpg&quot;&gt;
          &lt;img src=&quot;/assets/images/psych/kroul.jpg&quot; alt=&quot;&quot; /&gt;
      &lt;/a&gt;
    
  
  
&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;em&gt;Фрэнсис “Два ствола” Кроули&lt;/em&gt;&lt;/strong&gt; - гангстер и убийца. Застрелил двух копов в Нью-Йорке, после чего на него началась настоящая облава. Полиция вышла на него по наводке бывшей любовницы, которая застукала Кроули с другой женщиной и таким образом решила отомстить. В операции по захвату преступника участвовали 300 полицейских, вооруженных ружьями и автоматами, которые окружили пятиэтажное здание на 91-й улице, где он находился. Все это привлекло огромное количество зевак. По данным прессы там собралось около 15 000 человек. Перестрелка продолжалась 2 часа, но после того, как у Кроули кончились патроны, он был вынужден сдаться. Суд приговорил его к электрическому стулу. Приговор был приведен в исполнение в тюрьме Синг-Синг, в штате Нью-Йорк. На момент смерти Кроули был 19 лет.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;В момент перестрелки Кроули писал письмо, адресуя его “тем, кого это может касаться”. В этом письме Кроули писал:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Под моим пиджаком усталое, но доброе сердце, которое никому не причинит зла.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;em&gt;Аль Капоне.&lt;/em&gt;&lt;/strong&gt; За 14 лет правления Аль Капоне в Чикаго произошло 700 убийств, совершенных мафией; из них 400 - по приказу самого Капоне. Однажды Аль Капоне высказал следующую речь:&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;Я потратил лучшие годы своей жизни на то, чтобы доставлять людям зажигательные удовольствия и помогать им приятно проводить время, и всё, что получаю взамен - это оскорбления существование загнанного человека.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;em&gt;Шульц.&lt;/em&gt;&lt;/strong&gt; То же самое сказал “Немец” Шульц перед тем как скорчится под пулями гангстеров в Нью-Йорке. “Немец” Шульц - одна из известнейших нью-йоркских “крыс” - в интервью для газеты прямо заявил, что он благодетель общества. И он в это верил!&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;Так вот получается, что большинство из тех, кто когда-то совершил противоправные действия, стараются с помощью аргументов, путанных или логичных, оправдать свои антиобщественные действия даже в собственных глазах, приходя таким образом к твердому убеждению, что их вообще не следовало сажать в тюрьму.&lt;/p&gt;

&lt;p&gt;А теперь задумайтесь, если эти люди ни в чем не обвиняют себя, то что можно сказать о людях, с которыми каждый из нас находится в ежедневном общении?!&lt;/p&gt;

&lt;p&gt;Дейл Карнеги указывает, что в 99-ти случаях из 100 человек ни в чем не осуждает себя, независимо от того, насколько он прав или не прав. При этом важно понять, что критика бесполезна, ибо она ставит человека в позицию обороняющегося и побуждает его искать для себя оправдания. Критика опасна, ибо она ранит драгоценное для человека чувство собственного достоинства, наносит удар его представлению о собственной значимости и возбуждает в нем чувство обиды и негодования.&lt;/p&gt;

&lt;p&gt;Также на страницах истории можно найти тысячи примеров бесполезности чересчур строгой критики, которая ни к чему хорошему не приводила.&lt;/p&gt;

&lt;p&gt;Человеческая натура в действии:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Виновный обвинит кого угодно, но не себя. К сожалению, критика подобна домашним голубям. Она всегда возвращается обратно.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Пожалуй, хорошим примером по-настоящему выдержанного человека может служить Авраам Линкольн. Человек, который воспитал в себе искусство в обращении с людьми. К сожалению, начинал он как и все предшественники до него, с того, что разрешал себе критиковать других, пока с ним не произошло событие, которое изменило его полностью. Тот случай послужил для него бесценным уроком в искусстве общения с людьми. Никогда более не написал Линкольн унижающих человеческое достоинство писем. И не осмеивал никого и не подвергал личной критике.&lt;/p&gt;

&lt;p&gt;Одно из любимых выражений Авраама Линкольна:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Не судите, да не судимы будете&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Известен ли вам какой-нибудь человек, кого бы вам хотелось изменить, исправить, сделать лучше? Если да, то это великолепно. Но почему бы вам не начать с самого себя? Даже с чисто эгоистической точки зрения это несравненно выгоднее, чем стараться улучшать других и, между прочим, значительно безопаснее.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Критика&lt;/strong&gt; - опасная игра, которая может стать причиной взрыва в пороховом погребе гордости. Бенджамин Франклин, не отличавшийся талантов в юности, стал великолепным дипломатом в отношении с людьми. В чем его секрет?&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Я не склонен дурно отзываться ни о ком, - говорил он, - и о каждом говорю всё хорошее, что мне о нем известно.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Только глупец может критиковать, осуждать и высказывать недовольство. И, к сожалению, большинство глупцов так и поступает. Чтобы &lt;strong&gt;понимать&lt;/strong&gt; и &lt;strong&gt;прощать&lt;/strong&gt; необходимо овладеть характером и выработать самоконтроль.&lt;/p&gt;

&lt;p&gt;Вместо того, чтобы осуждать людей, постарайтесь понять их. Постарайтесь постичь, почему они поступили именно так, а не иначе. Это бесконечно более выгодно и интересно. Это пораждает взаимное понимание, терпимость и великодушие.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Всё понять - всё простить&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Почему же должны судить мы с вами?&lt;/p&gt;

&lt;p&gt;&lt;em&gt;P.S. Таковой вышла первая статья. Многие выдержки взяты из книги Дейла Карнеги вперемешку с личными мыслями. Статья использована в ознакомительно-познавательно-образовательных целях и не преследуют цели получить из этого выгоду. Спасибо, что прочитали статью! Свои отзывы можете оставлять в комментариях снизу&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="психология" /><category term="psychology" /><summary type="html">Данная статья является началом анализа и выявления ключевых моментов (для самого себя) в книге популярного американского писателя Дейла Карнеги “Как приобретать друзей и оказывать влияние на людей”. Дейл Карнеги основал собственную концепцию бесконфликтного общения, которая очень популярна в настоящее время.</summary></entry><entry><title type="html">Archiving and Compression</title><link href="https://iteducate.github.io/linux/archiving_compression/" rel="alternate" type="text/html" title="Archiving and Compression" /><published>2017-10-23T12:20:00+03:00</published><updated>2017-10-23T12:20:00+03:00</updated><id>https://iteducate.github.io/linux/archiving_compression</id><content type="html" xml:base="https://iteducate.github.io/linux/archiving_compression/">&lt;p&gt;&lt;strong&gt;File archiving&lt;/strong&gt; is used when one or more files need to be transmitted or stored as efficiently as possible.  There are two aspects to this:&lt;/p&gt;
&lt;ul type=&quot;disc&quot; class=&quot;&quot;&gt;
&lt;li&gt;
&lt;strong&gt;Archiving&lt;/strong&gt; – Combining multiple files into one, which eliminates the overhead in individual files and makes it easier to transmit&lt;/li&gt;
&lt;li&gt;
&lt;strong&gt;Compressing&lt;/strong&gt; – Making the files smaller by removing redundant information&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;11-introduction&quot;&gt;1.1 Introduction&lt;/h1&gt;

&lt;p&gt;You can archive multiple files into a single archive and then compress it, or you can compress an individual file.  The former is still referred to as archiving, while the latter is just called compression.  When you take an archive, decompress it and extract one or more files, you are &lt;var&gt;un-archiving&lt;/var&gt; it.&lt;/p&gt;

&lt;p&gt;Even though disk space is relatively cheap, archiving and compression still has value:&lt;/p&gt;
&lt;ul type=&quot;disc&quot; class=&quot;&quot;&gt;
&lt;li&gt;If you want to make a large number of files available, such as the source code to an application or a collection of documents, it is easier for people to download a compressed archive than it is to download individual files.&lt;/li&gt;
&lt;li&gt;Log files have a habit of filling disks so it is helpful to split them by date and compress older versions.&lt;/li&gt;
&lt;li&gt;When you back up directories, it is easier to keep them all in one archive than it is to version each file.&lt;/li&gt;
&lt;li&gt;Some streaming devices such as tapes perform better if you’re sending a stream of data rather than individual files.&lt;/li&gt;
&lt;li&gt;It can often be faster to compress a file before you send it to a tape drive or over a slower network and decompress it on the other end than it would be to send it uncompressed.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As a Linux administrator, you should become familiar with the tools for archiving and compressing files.&lt;/p&gt;

&lt;h1 id=&quot;12-compressing-files&quot;&gt;1.2 Compressing files&lt;/h1&gt;
&lt;p&gt;&lt;var&gt;Compressing&lt;/var&gt; files makes them smaller by removing duplication from a file and storing it such that the file can be restored.  A file with human readable text might have frequently used words replaced by something smaller, or an image with a solid background might represent patches of that color by a code.  You generally don’t use the compressed version of the file, instead you decompress it before use.  The &lt;var&gt;compression algorithm&lt;/var&gt; is a procedure the computer does to encode the original file, and as a result make it smaller.  Computer scientists research these algorithms and come up with better ones that can work faster or make the input file smaller.&lt;/p&gt;

&lt;p&gt;When talking about compression, there are two types:&lt;/p&gt;
&lt;ul type=&quot;disc&quot; class=&quot;&quot;&gt;
&lt;li&gt;
&lt;strong&gt;Lossless&lt;/strong&gt;:  No information is removed from the file.  Compressing a file and decompressing it leaves something identical to the original.&lt;/li&gt;
&lt;li&gt;
&lt;strong&gt;Lossy&lt;/strong&gt;:  Information might be removed from the file as it is compressed so that uncompressing a file will result in a file that is slightly different than the original.  For instance, an image with two subtly different shades of green might be made smaller by treating those two shades as the same.  Often, the eye can’t pick out the difference anyway.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Generally human eyes and ears don’t notice slight imperfections in pictures and audio, especially as they are displayed on a monitor or played over speakers.  Lossy compression often benefits media because it results in smaller file sizes and people can’t tell the difference between the original and the version with the changed data.  For things that must remain intact, such as documents, logs, and software, you need lossless compression.&lt;/p&gt;

&lt;p&gt;Most image formats, such as GIF, PNG, and JPEG, implement some kind of lossy compression.  You can generally decide how much quality you want to preserve.  A lower quality results in a smaller file, but after decompression you may notice artifacts such as rough edges or discolorations.  High quality will look much like the original image, but the file size will be closer to the original.&lt;/p&gt;

&lt;p&gt;Compressing an already compressed file will not make it smaller.  This is often forgotten when it comes to images, since they are already stored in a compressed format.  With lossless compression, this multiple compression is not a problem, but if you compress and decompress a file several times using a lossy algorithm you will eventually have something that is unrecognizable.&lt;/p&gt;

&lt;p&gt;Linux provides several tools to compress files, the most common is &lt;code&gt;gzip&lt;/code&gt;.  Here we show a log file before and after compression.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; access_log&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 sean sean 372063 Oct 11 21:24 access_log
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;gzip &lt;/span&gt;access_log
&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; access_log&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 sean sean 26080 Oct 11 21:24 access_log.gz&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;In the example above, there is a file called &lt;code class=&quot;console&quot;&gt;access_log&lt;/code&gt; that is 372,063 bytes.  The file is compressed by invoking the &lt;code&gt;gzip&lt;/code&gt; command with the name of the file as the only argument.  After that command completes, the original file is gone and a compressed version with a file extension of &lt;code class=&quot;console&quot;&gt;.gz&lt;/code&gt; is left in its place.  The file size is now 26,080 bytes, giving a compression ratio of about 14:1, which is common with log files.&lt;/p&gt;

&lt;p&gt;Gzip will give you this information if you ask, by using the &lt;code&gt;–l&lt;/code&gt; parameter, as shown here:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;gzip&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; access_log.gz
&lt;span class=&quot;go&quot;&gt;      compressed     uncompressed  ratio uncompressed_name
           26080           372063  93.0% access_log&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Here, you can see that the compression ratio is given as 93%, which is the inverse of the 14:1 ratio, i.e. 13/14.  Additionally, when the file is decompressed it will be called &lt;code class=&quot;console&quot;&gt;access_log&lt;/code&gt;. &lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;gunzip &lt;/span&gt;access_log.gz
&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; access_log&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 sean sean 372063 Oct 11 21:24 access_log&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The opposite of the &lt;code&gt;gzip&lt;/code&gt; command is &lt;code&gt;gunzip&lt;/code&gt;.  Alternatively, &lt;code&gt;gzip –d&lt;/code&gt; does the same thing (&lt;code&gt;gunzip&lt;/code&gt; is just a script that calls &lt;code&gt;gzip&lt;/code&gt; with the right parameters). After &lt;code&gt;gunzip&lt;/code&gt; does its work you can see that the &lt;code class=&quot;console&quot;&gt;access_log&lt;/code&gt; file is back to its original size.&lt;/p&gt;

&lt;p&gt;Gzip can also act as a filter which means it doesn’t read or write anything to disk but instead receives data through an input channel and writes it out to an output channel.  You’ll learn more about how this works in the next chapter, so the next example just gives you an idea of what you can do by being able to compress a stream.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;mysqldump &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;gzip&lt;/span&gt; &amp;amp;gt&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; database_backup.gz
&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;gzip&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; database_backup.gz
&lt;span class=&quot;go&quot;&gt;         compressed        uncompressed  ratio uncompressed_name
              76866             1028003  92.5% database_backup&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The &lt;code&gt;mysqldump –A&lt;/code&gt; command outputs the contents of the local MySQL databases to the console. The &lt;code class=&quot;console&quot;&gt;|&lt;/code&gt; character (pipe) says “redirect the output of the previous command into the input of the next one”. The program to receive the output is &lt;code&gt;gzip&lt;/code&gt;, which recognizes that no filenames were given so it should operate in pipe mode. Finally, the &lt;code&gt;&amp;gt; database_backup.gz&lt;/code&gt; means “redirect the output of the previous command into a file called &lt;code class=&quot;console&quot;&gt;database_backup.gz&lt;/code&gt;. Inspecting this file with &lt;code&gt;gzip –l&lt;/code&gt; shows that the compressed version is 7.5% of the size of the original, with the added benefit that the larger file never had to be written to disk.&lt;/p&gt;

&lt;p&gt;There is another pair of commands that operate virtually identically to &lt;code&gt;gzip&lt;/code&gt; and &lt;code&gt;gunzip&lt;/code&gt;. These are &lt;code&gt;bzip2&lt;/code&gt; and &lt;code&gt;bunzip2&lt;/code&gt;. The &lt;code&gt;bzip&lt;/code&gt; utilities use a different compression algorithm (called Burrows-Wheeler block sorting, versus Lempel-Ziv coding used by &lt;code&gt;gzip&lt;/code&gt;) that can compress files smaller than &lt;code&gt;gzip&lt;/code&gt; at the expense of more CPU time. You can recognize these files because they have a &lt;code class=&quot;console&quot;&gt;.bz&lt;/code&gt; or &lt;code class=&quot;console&quot;&gt;bz2&lt;/code&gt; extension instead of &lt;code class=&quot;console&quot;&gt;.gz&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;13-archiving-files&quot;&gt;1.3 Archiving Files&lt;/h1&gt;
&lt;p&gt;If you had several files to send to someone, you could compress each one individually.  You would have a smaller amount of data in total than if you sent uncompressed files, but you would still have to deal with many files at one time.&lt;/p&gt;

&lt;p&gt;&lt;var&gt;Archiving&lt;/var&gt; is the solution to this problem.  The traditional UNIX utility to archive files is called &lt;code&gt;tar&lt;/code&gt;, which is a short form of TApe aRchive.  &lt;var&gt;Tar&lt;/var&gt; was used to stream many files to a tape for backups or file transfer.  Tar takes in several files and creates a single output file that can be split up again into the original files on the other end of the transmission.&lt;/p&gt;

&lt;p&gt;Tar has 3 modes you will want to be familiar with:&lt;/p&gt;
&lt;ul type=&quot;disc&quot; class=&quot;&quot;&gt;
&lt;li&gt;
&lt;strong&gt;Create&lt;/strong&gt;:  make a new archive out of a series of files&lt;/li&gt;
&lt;li&gt;
&lt;strong&gt;Extract&lt;/strong&gt;:  pull one or more files out of an archive&lt;/li&gt;
&lt;li&gt;
&lt;strong&gt;List&lt;/strong&gt;:  show the contents of the archive without extracting&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Remembering the modes is key to figuring out the command line options necessary to do what you want.  In addition to the mode, you will also want to make sure you remember where to specify the name of the archive, as you may be entering multiple file names on a command line.&lt;/p&gt;

&lt;p&gt;Here, we show a &lt;var&gt;tar file&lt;/var&gt;, also called a tarball, being created from multiple access logs.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-cf&lt;/span&gt; access_logs.tar access_log&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; access_logs.tar
&lt;span class=&quot;go&quot;&gt;-rw-rw-r-- 1 sean sean 542720 Oct 12 21:42 access_logs.tar&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Creating an archive requires two named options.  The first, &lt;code&gt;c&lt;/code&gt;, specifies the mode. The second, &lt;code&gt;f&lt;/code&gt;, tells tar to expect a file name as the next argument. The first argument in the example above creates an archive called &lt;code class=&quot;console&quot;&gt;access_logs.tar&lt;/code&gt;.  The remaining arguments are all taken to be input file names, either as a wildcard, a list of files, or both.  In this example, we use the wildcard option to include all files that begin with &lt;code class=&quot;console&quot;&gt;access_log&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The example above does a long directory listing of the created file.  The final size is 542,720 bytes which is slightly larger than the input files. Tarballs can be compressed for easier transport, either by gzipping the archive or by having &lt;code&gt;tar&lt;/code&gt; do it with the &lt;code&gt;z&lt;/code&gt; flag as follows:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-czf&lt;/span&gt; access_logs.tar.gz  access_log&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; access_logs.tar.gz
&lt;span class=&quot;go&quot;&gt;-rw-rw-r-- 1 sean sean 46229 Oct 12 21:50 access_logs.tar.gz
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;gzip&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; access_logs.tar.gz
&lt;span class=&quot;go&quot;&gt;         compressed        uncompressed  ratio uncompressed_name
              46229              542720  91.5% access_logs.tar&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The example above shows the same command as the prior example, but with the addition of the &lt;code&gt;z&lt;/code&gt; parameter.  The output is much smaller than the tarball itself, and the resulting file is compatible with &lt;code&gt;gzip&lt;/code&gt;. You can see from the last command that the uncompressed file is the same size as it would be if you tarred it in a separate step.&lt;/p&gt;

&lt;p&gt;While UNIX doesn’t treat file extensions specially, the convention is to use &lt;code class=&quot;console&quot;&gt;.tar&lt;/code&gt; for &lt;code&gt;tar&lt;/code&gt; files, and &lt;code class=&quot;console&quot;&gt;.tar.gz&lt;/code&gt; or &lt;code class=&quot;console&quot;&gt;.tgz&lt;/code&gt; for compressed &lt;code&gt;tar&lt;/code&gt; files. You can use &lt;code&gt;bzip2&lt;/code&gt; instead of &lt;code&gt;gzip&lt;/code&gt; by substituting the letter &lt;code&gt;z&lt;/code&gt; for &lt;code&gt;j&lt;/code&gt; and using &lt;code class=&quot;console&quot;&gt;.tar.bz2&lt;/code&gt;, &lt;code class=&quot;console&quot;&gt;.tbz&lt;/code&gt;, or &lt;code class=&quot;console&quot;&gt;.tbz2&lt;/code&gt; for a file extension (e.g. &lt;code&gt;tar –cjf file.tbz access_log*&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Given a &lt;code&gt;tar&lt;/code&gt; file, compressed or not, you can see what’s in it by using the &lt;code&gt;t&lt;/code&gt; command:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-tjf&lt;/span&gt; access_logs.tbz
&lt;span class=&quot;go&quot;&gt;logs/
logs/access_log.3
logs/access_log.1
logs/access_log.4
logs/access_log
logs/access_log.2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This example uses 3 options:&lt;/p&gt;
&lt;ul type=&quot;disc&quot; class=&quot;&quot;&gt;
&lt;li&gt;
&lt;code&gt;t&lt;/code&gt;: list files in the archive&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;j&lt;/code&gt;:  decompress with &lt;code&gt;bzip2&lt;/code&gt; before reading&lt;/li&gt;
&lt;li&gt;
&lt;code&gt;f&lt;/code&gt;:  operate on the given filename &lt;code class=&quot;console&quot;&gt;access_logs.tbz&lt;/code&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The contents of the compressed archive are then displayed.  You can see that a directory was prefixed to the files.  Tar will recurse into subdirectories automatically when compressing and will store the path info inside the archive.&lt;/p&gt;

&lt;p&gt;Just to show that this file is still nothing special, we will list the contents of the file in two steps using a pipeline.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;bunzip2 &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; access_logs.tbz | &lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;logs/
logs/access_log.3
logs/access_log.1
logs/access_log.4
logs/access_log
logs/access_log.2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The left side of the pipeline is &lt;code&gt;bunzip –c access_logs.tbz&lt;/code&gt;, which decompresses the file, but the &lt;code&gt;-c&lt;/code&gt; option sends the output to the screen. The output is redirected to &lt;code&gt;tar –t&lt;/code&gt;. If you don’t specify a file with &lt;code&gt;–f&lt;/code&gt; then &lt;code&gt;tar&lt;/code&gt; will read from the standard input, which in this case is the uncompressed file.&lt;/p&gt;

&lt;p&gt;Finally you can extract the archive with the &lt;code&gt;–x&lt;/code&gt; flag:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xjf&lt;/span&gt; access_logs.tbz
&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;total 36
-rw-rw-r-- 1 sean sean 30043 Oct 14 13:27 access_logs.tbz
drwxrwxr-x 2 sean sean  4096 Oct 14 13:26 logs
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; logs
&lt;span class=&quot;go&quot;&gt;total 536
-rw-r--r-- 1 sean sean 372063 Oct 11 21:24 access_log
-rw-r--r-- 1 sean sean    362 Oct 12 21:41 access_log.1
-rw-r--r-- 1 sean sean 153813 Oct 12 21:41 access_log.2
-rw-r--r-- 1 sean sean   1136 Oct 12 21:41 access_log.3
-rw-r--r-- 1 sean sean    784 Oct 12 21:41 access_log.4&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The example above uses the similar pattern as before, specifying the operation (eXtract), the compression (the &lt;code&gt;j&lt;/code&gt; flag, meaning &lt;code&gt;bzip2&lt;/code&gt;), and a file name (&lt;code&gt;-f&lt;/code&gt; &lt;code class=&quot;console&quot;&gt;access_logs.tbz&lt;/code&gt;).  The original file is untouched and the new &lt;strong&gt;logs&lt;/strong&gt; directory is created. Inside the directory are the files.&lt;/p&gt;

&lt;p&gt;Add the &lt;code&gt;–v&lt;/code&gt; flag and you will get verbose output of the files processed. This is helpful so you can see what’s happening:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xjvf&lt;/span&gt; access_logs.tbz
&lt;span class=&quot;go&quot;&gt;  logs/
  logs/access_log.3
  logs/access_log.1
  logs/access_log.4
  logs/access_log
  logs/access_log.2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It is important to keep the &lt;code&gt;–f&lt;/code&gt; flag at the end, as &lt;code&gt;tar&lt;/code&gt; assumes whatever follows it is a filename.  In the next example, the &lt;code&gt;f&lt;/code&gt; and &lt;code&gt;v&lt;/code&gt; flags were transposed, leading to &lt;code&gt;tar&lt;/code&gt; interpreting the command as an operation on a file called &quot;&lt;code class=&quot;console&quot;&gt;v&lt;/code&gt;&quot; (the relevant message is in italics.)&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xjfv&lt;/span&gt; access_logs.tbz
&lt;span class=&quot;go&quot;&gt;tar (child): v: Cannot open: No such file or directory
tar (child): Error is not recoverable: exiting now
tar: Child returned status 2
tar: Error is not recoverable: exiting now&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;If you only want some files out of the archive you can add their names to the end of the command, but by default they must match the name in the archive exactly or use a pattern:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xjvf&lt;/span&gt; access_logs.tbz logs/access_log
&lt;span class=&quot;go&quot;&gt;logs/access_log&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The example above shows the same archive as before, but extracting only the &lt;code class=&quot;console&quot;&gt;logs/access_log&lt;/code&gt; file. The output of the command (as verbose mode was requested with the &lt;code&gt;v&lt;/code&gt; flag) shows only the one file has been extracted.&lt;/p&gt;

&lt;p&gt;Tar has many more features, such as the ability to use patterns when extracting files, excluding certain files, or outputting the extracted files to the screen instead of disk. The documentation for &lt;code&gt;tar&lt;/code&gt; has in depth information.&lt;/p&gt;

&lt;h1 id=&quot;14-zip-files&quot;&gt;1.4 ZIP files&lt;/h1&gt;
&lt;p&gt;The de facto archiving utility in the Microsoft world is the ZIP file.  It is not as prevalent in Linux but is well supported by the &lt;code&gt;zip&lt;/code&gt; and &lt;code&gt;unzip&lt;/code&gt; commands.  With &lt;code&gt;tar&lt;/code&gt; and &lt;code&gt;gzip&lt;/code&gt;/&lt;code&gt;gunzip&lt;/code&gt; the same commands and options can be used to do the creation and extraction, but this is not the case with &lt;code&gt;zip&lt;/code&gt;.  The same option has different meanings for the two different commands.&lt;/p&gt;

&lt;p&gt;The default mode of &lt;code&gt;zip&lt;/code&gt; is to add files to an archive and compress it.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;zip logs.zip logs/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  adding: logs/access_log (deflated 93%)
  adding: logs/access_log.1 (deflated 62%)
  adding: logs/access_log.2 (deflated 88%)
  adding: logs/access_log.3 (deflated 73%)
  adding: logs/access_log.4 (deflated 72%)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The first argument in the example above is the name of the archive to be operated on, in this case it is &lt;code class=&quot;console&quot;&gt;logs.zip&lt;/code&gt;.  After that, is a list of files to be added. The output shows the files and the compression ratio. It should be noted that &lt;code&gt;tar&lt;/code&gt; requires the &lt;code&gt;–f&lt;/code&gt; option to indicate a filename is being passed, while &lt;code&gt;zip&lt;/code&gt; and &lt;code&gt;unzip&lt;/code&gt; require a filename and therefore don’t need you to explicitly say a filename is being passed.&lt;/p&gt;

&lt;p&gt;Zip will not recurse into subdirectories by default, which is different behavior than &lt;code&gt;tar&lt;/code&gt;. That is, merely adding &lt;code class=&quot;console&quot;&gt;logs&lt;/code&gt; instead of &lt;code class=&quot;console&quot;&gt;logs/*&lt;/code&gt; will only add the empty directory and not the files under it. If you want &lt;code&gt;tar&lt;/code&gt; like behavior, you must use the &lt;code&gt;–r&lt;/code&gt; command to indicate recursion is to be used:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;zip &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; logs.zip logs
&lt;span class=&quot;go&quot;&gt;  adding: logs/ (stored 0%)
  adding: logs/access_log.3 (deflated 73%)
  adding: logs/access_log.1 (deflated 62%)
  adding: logs/access_log.4 (deflated 72%)
  adding: logs/access_log (deflated 93%)
  adding: logs/access_log.2 (deflated 88%)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;In the example above, all files under the logs directory are added because it uses the &lt;code&gt;–r&lt;/code&gt; option.  The first line of output indicates that a directory was added to the archive, but otherwise the output is similar to the previous example.&lt;/p&gt;

&lt;p&gt;Listing files in the &lt;code&gt;zip&lt;/code&gt; is done by the &lt;code&gt;unzip&lt;/code&gt; command and the &lt;code&gt;–l&lt;/code&gt; option (list):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;unzip &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; logs.zip
&lt;span class=&quot;go&quot;&gt;Archive:  logs.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
        0  10-14-2013 14:07   logs/
     1136  10-14-2013 14:07   logs/access_log.3
      362  10-14-2013 14:07   logs/access_log.1
      784  10-14-2013 14:07   logs/access_log.4
    90703  10-14-2013 14:07   logs/access_log
   153813  10-14-2013 14:07   logs/access_log.2
---------                     -------
   246798                     6 files&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Extracting the files is just like creating the archive, as the default operation is to extract:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;unzip logs.zip
&lt;span class=&quot;go&quot;&gt;Archive:  logs.zip
   creating: logs/
  inflating: logs/access_log.3
  inflating: logs/access_log.1
  inflating: logs/access_log.4
  inflating: logs/access_log
  inflating: logs/access_log.2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Here, we extract all the files in the archive to the current directory.  Just like &lt;code&gt;tar&lt;/code&gt;, you can pass filenames on the command line:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;unzip logs.zip access_log
&lt;span class=&quot;go&quot;&gt;Archive:  logs.zip
caution: filename not matched:  access_log
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;unzip logs.zip logs/access_log
&lt;span class=&quot;go&quot;&gt;Archive:  logs.zip
  inflating: logs/access_log
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;bob:tmp $&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;unzip logs.zip logs/access_log.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;Archive:  logs.zip
  inflating: logs/access_log.3
  inflating: logs/access_log.1
  inflating: logs/access_log.4
  inflating: logs/access_log.2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The example above shows three different attempts to extract a file.  First, just the name of the file is passed without the directory component.  Like &lt;code&gt;tar&lt;/code&gt;, the file is not matched.&lt;/p&gt;

&lt;p&gt;The second attempt passes the directory component along with the filename, which extracts just that file.&lt;/p&gt;

&lt;p&gt;The third version uses a wildcard, which extracts the 4 files matching the pattern, just like &lt;code&gt;tar&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;zip&lt;/code&gt; and &lt;code&gt;unzip&lt;/code&gt; man pages describe the other things you can do with these tools, such as replace files within the archive, use different compression levels, and even use encryption.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Все материалы взяты с официального курса &lt;i class=&quot;fa fa-link&quot;&gt;&lt;/i&gt; &lt;a href=&quot;https://www.netacad.com/ru/courses/ndg-linux-essentials/&quot;&gt;NDG Linux Essential&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;</content><author><name>Ivan Denisenko</name></author><category term="linux" /><category term="gzip" /><category term="gunzip" /><category term="bzip" /><category term="bunzip" /><category term="tar" /><category term="zip" /><category term="unzip" /><summary type="html">File archiving is used when one or more files need to be transmitted or stored as efficiently as possible. There are two aspects to this: Archiving – Combining multiple files into one, which eliminates the overhead in individual files and makes it easier to transmit Compressing – Making the files smaller by removing redundant information</summary></entry></feed>