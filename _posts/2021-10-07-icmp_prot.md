---
layout: single
title:  "Структура протокола ICMP"
date:   2021-10-07 00:00:00 +0300
tags: protocols icmp 
categories: networks
comments: true

layouts_gallery_1:
  - url: /assets/images/icmp/structure_icmp.png
    image_path: /assets/images/icmp/structure_icmp.png


---

Internet Control Message Protocol или просто ICMP описан в [RFC 792](https://www.rfc-editor.org/rfc/rfc792.html). Данный протокол определяет набор различных сообщений, целью которых является управление сетью.

ICMP сообщения могут классифицироваться как *сообщения об ошибках*, а также как сообщения типа *"запрос - ответ"*. 

<div class="mermaid" align="center">
graph TD
 C{ICMP}
    C --> D[Error message]
    C --> E[Query-Response]
</div>

Ниже представлен основной формат пакета ICMP

{% include gallery id="layouts_gallery_1" caption="**Структура протокола ICMP**" %}

Пакеты ICMP определяются по их типу (***Type***), однако, большинство типов могут иметь более специфичные типы, они определяются по полю ***Code***. [RFC 1700](https://www.rfc-editor.org/rfc/rfc1700.html) определяет все основные типы и коды для протокола ICMP.

Ниже в таблице также перечислены данные поля с их описанием

<table>
	<thead>
		<tr>
			<th scope="col">Тип</th>
			<th scope="col">Код</th>
			<th scope="col">Название</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>0</td>
			<td>0</td>
			<td>Echo Reply</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="14">3</td>
			<td>&nbsp;</td>
			<td>Destination Unreachable</td>
		</tr>
		<tr>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>1</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>2</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>3</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>4</td>
			<td>Fragmentation Needed and Don't Fragment Flag Set</td>
		</tr>
		<tr>
			<td>5</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>6</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>7</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>8</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>9</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>10</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>11</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>12</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>4</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="5">5</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>1</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>2</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>3</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>6</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>8</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>9</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>10</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="3">11</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>1</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="4">12</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>1</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>2</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>13</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>14</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>15</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>16</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>17</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>18</td>
			<td>0</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>30</td>
			<td>-</td>
			<td>Traceroute</td>
		</tr>
	</tbody>
</table>


**P.S.** *вся информация представленная здесь используется исключительно в образовательных целях. Все совпадения с реальными объектами, адресами, именами и т.д. случайна и не несёт цели получить от этого выгоду или причинить кому-либо вред.*